(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,365801,742710,e=>{"use strict";let t=Symbol(),a=Symbol(),r=Object.getPrototypeOf,n=new WeakMap,o=e=>e&&(n.has(e)?n.get(e):r(e)===Object.prototype||r(e)===Array.prototype),s=(e,t=!0)=>{n.set(e,t)},i={get url(){return`file://${e.P("node_modules/valtio/esm/vanilla.mjs")}`}},c=e=>"object"==typeof e&&null!==e,l=(e,t)=>{let a=C.get(e);if((null==a?void 0:a[0])===t)return a[1];let r=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e));return s(r,!0),C.set(e,[t,r]),Reflect.ownKeys(e).forEach(t=>{if(Object.getOwnPropertyDescriptor(r,t))return;let a=Reflect.get(e,t),{enumerable:n}=Reflect.getOwnPropertyDescriptor(e,t),o={value:a,enumerable:n,configurable:!0};if(p.has(a))s(a,!1);else if(d.has(a)){let[e,t]=d.get(a);o.value=l(e,t())}Object.defineProperty(r,t,o)}),Object.preventExtensions(r)},d=new WeakMap,p=new WeakSet,C=new WeakMap,E=[1],u=new WeakMap,h=Object.is;function m(e={}){let t,r,n;if(!c(e))throw Error("object required");let s=u.get(e);if(s)return s;let l=E[0],C=new Set,S=(e,t=++E[0])=>{l!==t&&(g=l=t,C.forEach(a=>a(e,t)))},g=l,f=e=>(t,a)=>{let r=[...t];r[1]=[e,...r[1]],S(r,a)},A=new Map,_=!0,N=new Proxy(e,(t=()=>_,r=(e,t)=>{let a=!p.has(t)&&d.get(t);if(a){if((i.env?i.env.MODE:void 0)!=="production"&&A.has(e))throw Error("prop listener already exists");if(C.size){let t=a[2](f(e));A.set(e,[a,t])}else A.set(e,[a])}},n=e=>{var t;let a=A.get(e);a&&(A.delete(e),null==(t=a[1])||t.call(a))},{deleteProperty(e,t){let a=Reflect.get(e,t);n(t);let r=Reflect.deleteProperty(e,t);return r&&S(["delete",[t],a]),r},set(e,s,i,l){var C;let E,g=!t()&&Reflect.has(e,s),f=Reflect.get(e,s,l);if(g&&(h(f,i)||u.has(i)&&h(f,u.get(i))))return!0;n(s),c(i)&&(i=o(C=i)&&C[a]||i);let A=!d.has(i)&&c(E=i)&&!p.has(E)&&(Array.isArray(E)||!(Symbol.iterator in E))&&!(E instanceof WeakMap)&&!(E instanceof WeakSet)&&!(E instanceof Error)&&!(E instanceof Number)&&!(E instanceof Date)&&!(E instanceof String)&&!(E instanceof RegExp)&&!(E instanceof ArrayBuffer)&&!(E instanceof Promise)?m(i):i;return r(s,A),Reflect.set(e,s,A,l),S(["set",[s],i,f]),!0}}));u.set(e,N);let w=[e,(e=E[0])=>(g!==e&&(g=e,A.forEach(([t])=>{let a=t[1](e);a>l&&(l=a)})),l),e=>(C.add(e),1===C.size&&A.forEach(([e,t],a)=>{if((i.env?i.env.MODE:void 0)!=="production"&&t)throw Error("remove already exists");let r=e[2](f(a));A.set(a,[e,r])}),()=>{C.delete(e),0===C.size&&A.forEach(([e,t],a)=>{t&&(t(),A.set(a,[e]))})})];return d.set(N,w),Reflect.ownKeys(e).forEach(t=>{let a=Object.getOwnPropertyDescriptor(e,t);"value"in a&&a.writable&&(N[t]=e[t])}),_=!1,N}function S(e,t,a){let r,n=d.get(e);(i.env?i.env.MODE:void 0)==="production"||n||console.warn("Please use proxy object");let o=[],s=n[2],c=!1,l=s(e=>{(o.push(e),a)?t(o.splice(0)):r||(r=Promise.resolve().then(()=>{r=void 0,c&&t(o.splice(0))}))});return c=!0,()=>{c=!1,l()}}function g(e){let t=d.get(e);(i.env?i.env.MODE:void 0)==="production"||t||console.warn("Please use proxy object");let[a,r]=t;return l(a,r())}function f(e){return p.add(e),e}function A(){return{proxyStateMap:d,refSet:p,snapCache:C,versionHolder:E,proxyCache:u}}function _(e,t,a,r){let n=e[t];return S(e,()=>{let r=e[t];Object.is(n,r)||a(n=r)},r)}e.s(["proxy",()=>m,"ref",()=>f,"snapshot",()=>g,"subscribe",()=>S,"unstable_getInternalStates",()=>A],365801),Symbol();let{proxyStateMap:N,snapCache:w}=A();function I(e){let t=[],a=0,r=new Map,n=new WeakMap,o=e=>n.get(e)||r;if(e){if("function"!=typeof e[Symbol.iterator])throw TypeError("proxyMap:\n	initial state must be iterable\n		tip: structure should be [[key, value]]");for(let[n,o]of e)r.set(n,a),t[a++]=o}let s={data:t,index:a,epoch:0,get size(){return N.has(this)||(()=>{let e=w.get(s),t=null==e?void 0:e[1];if(t&&!n.has(t)){let e=new Map(r);n.set(t,e)}})(),o(this).size},get(e){let t=o(this).get(e);return void 0===t?void this.epoch:this.data[t]},has(e){let t=o(this);return this.epoch,t.has(e)},set(e,t){if(!N.has(this))throw Error("Cannot perform mutations on a snapshot");let a=r.get(e);return void 0===a?(r.set(e,this.index),this.data[this.index++]=t):this.data[a]=t,this.epoch++,this},delete(e){if(!N.has(this))throw Error("Cannot perform mutations on a snapshot");let t=r.get(e);return void 0!==t&&(delete this.data[t],r.delete(e),this.epoch++,!0)},clear(){if(!N.has(this))throw Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(e){this.epoch,o(this).forEach((t,a)=>{e(this.data[t],a,this)})},*entries(){for(let[e,t]of(this.epoch,o(this)))yield[e,this.data[t]]},*keys(){for(let e of(this.epoch,o(this).keys()))yield e},*values(){for(let e of(this.epoch,o(this).values()))yield this.data[e]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},i=m(s);return Object.defineProperties(i,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(i),i}let{proxyStateMap:T,snapCache:R}=A();e.s(["proxyMap",()=>I,"subscribeKey",()=>_],742710)},401564,e=>{"use strict";var t=e.i(247167);let a={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos",sui:"Sui",stacks:"Stacks"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],SOLANA_SPL_TOKEN_ADDRESSES:{SOL:"So11111111111111111111111111111111111111112"},HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(void 0!==t.default&&void 0!==t.default.env?t.default.env.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}},IS_DEVELOPMENT:void 0!==t.default&&!1,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://localhost:*","http://127.0.0.1:*","https://127.0.0.1:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]};e.s(["ConstantsUtil",0,a])},681285,150576,979484,824652,e=>{"use strict";var t=e.i(401564);e.s(["AVAILABLE_NAMESPACES",0,["eip155","solana","polkadot","bip122","cosmos","sui","stacks"],"NetworkUtil",0,{caipNetworkIdToNumber:e=>e?Number(e.split(":")[1]):void 0,parseEvmChainId(e){return"string"==typeof e?this.caipNetworkIdToNumber(e):e},getNetworksByNamespace:(e,t)=>e?.filter(e=>e.chainNamespace===t)||[],getFirstNetworkByNamespace(e,t){return this.getNetworksByNamespace(e,t)[0]},getNetworkNameByCaipNetworkId(e,a){if(!a)return;let r=e.find(e=>e.caipNetworkId===a);if(r)return r.name;let[n]=a.split(":");return t.ConstantsUtil.CHAIN_NAME_MAP?.[n]||void 0}}],681285),e.s(["ParseUtil",0,{validateCaipAddress(e){if(e.split(":")?.length!==3)throw Error("Invalid CAIP Address");return e},parseCaipAddress(e){let t=e.split(":");if(3!==t.length)throw Error(`Invalid CAIP-10 address: ${e}`);let[a,r,n]=t;if(!a||!r||!n)throw Error(`Invalid CAIP-10 address: ${e}`);return{chainNamespace:a,chainId:r,address:n}},parseCaipNetworkId(e){let t=e.split(":");if(2!==t.length)throw Error(`Invalid CAIP-2 network id: ${e}`);let[a,r]=t;if(!a||!r)throw Error(`Invalid CAIP-2 network id: ${e}`);return{chainNamespace:a,chainId:r}}}],150576);var a=e.i(247167);void 0!==a.default&&void 0!==a.default.env&&a.default.env.NEXT_PUBLIC_SECURE_SITE_SDK_URL,void 0!==a.default&&void 0!==a.default.env&&a.default.env.NEXT_PUBLIC_DEFAULT_LOG_LEVEL,void 0!==a.default&&void 0!==a.default.env&&a.default.env.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION;let r={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},n={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}};e.s(["W3mFrameConstants",0,r,"W3mFrameRpcConstants",0,n],979484),e.s(["W3mFrameStorage",()=>c],824652);let o=/^0x(?:[A-Fa-f0-9]{64})$/u,s=/^0x(?:[a-fA-F0-9]{62,})$/u,i={checkIfAllowedToTriggerEmail(){let e=c.get(r.LAST_EMAIL_LOGIN_TIME);if(e){let t=Date.now()-Number(e);if(t<3e4){let e=Math.ceil((3e4-t)/1e3);throw Error(`Please try again after ${e} seconds`)}}},getTimeToNextEmailLogin(){let e=c.get(r.LAST_EMAIL_LOGIN_TIME);if(e){let t=Date.now()-Number(e);if(t<3e4)return Math.ceil((3e4-t)/1e3)}return 0},checkIfRequestExists:e=>n.NOT_SAFE_RPC_METHODS.includes(e.method)||n.SAFE_RPC_METHODS.includes(e.method),getResponseType:e=>"string"==typeof e&&(e?.match(o)||e?.match(s))?r.RPC_RESPONSE_TYPE_TX:r.RPC_RESPONSE_TYPE_OBJECT,checkIfRequestIsSafe:e=>n.SAFE_RPC_METHODS.includes(e.method),isClient:"undefined"!=typeof window},c={set(e,t){i.isClient&&localStorage.setItem(`${r.STORAGE_KEY}${e}`,t)},get:e=>i.isClient?localStorage.getItem(`${r.STORAGE_KEY}${e}`):null,delete(e,t){i.isClient&&(t?localStorage.removeItem(e):localStorage.removeItem(`${r.STORAGE_KEY}${e}`))}}},360334,e=>{"use strict";var t=e.i(247167),a=e.i(401564);let r=(void 0!==t.default&&void 0!==t.default.env?t.default.env.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",n={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:r,SECURE_SITE_DASHBOARD:`${r}/dashboard`,SECURE_SITE_FAVICON:`${r}/images/favicon.png`,SOLANA_NATIVE_TOKEN_ADDRESS:"So11111111111111111111111111111111111111111",RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],SUGGESTED_TOKENS_BY_CHAIN:{"eip155:42161":["USDâ‚®0"]},BALANCE_SUPPORTED_CHAINS:[a.ConstantsUtil.CHAIN.EVM,a.ConstantsUtil.CHAIN.SOLANA],SEND_PARAMS_SUPPORTED_CHAINS:[a.ConstantsUtil.CHAIN.EVM],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:[a.ConstantsUtil.CHAIN.EVM],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:[a.ConstantsUtil.CHAIN.EVM,a.ConstantsUtil.CHAIN.SOLANA],PAY_WITH_EXCHANGE_SUPPORTED_CHAIN_NAMESPACES:[a.ConstantsUtil.CHAIN.EVM,a.ConstantsUtil.CHAIN.SOLANA],ACTIVITY_ENABLED_CHAIN_NAMESPACES:[a.ConstantsUtil.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x",sui:"0x",stacks:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:[a.ConstantsUtil.CHAIN.EVM,a.ConstantsUtil.CHAIN.SOLANA],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0,multiWallet:!1,emailCapture:!1,payWithExchange:!1,payments:!1,reownAuthentication:!1},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1,emailCapture:!1,reownAuthentication:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1,reownAuthentication:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}};e.s(["ConstantsUtil",0,n,"MELD_PUBLIC_KEY",0,"WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU","ONRAMP_PROVIDERS",0,[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}]])},376527,e=>{"use strict";function t(e){if(!e)throw Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${e}:connected_connector_id`}function a(){return"undefined"!=typeof window&&"undefined"!=typeof localStorage}e.s(["SafeLocalStorage",0,{setItem(e,t){a()&&void 0!==t&&localStorage.setItem(e,t)},getItem(e){if(a())return localStorage.getItem(e)||void 0},removeItem(e){a()&&localStorage.removeItem(e)},clear(){a()&&localStorage.clear()}},"SafeLocalStorageKeys",0,{WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",RECENT_WALLET:"@appkit/recent_wallet",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids",HISTORY_TRANSACTIONS_CACHE:"@appkit/history_transactions_cache",TOKEN_PRICE_CACHE:"@appkit/token_price_cache",RECENT_EMAILS:"@appkit/recent_emails",LATEST_APPKIT_VERSION:"@appkit/latest_version"},"getSafeConnectorIdKey",()=>t,"isSafe",()=>a])},227302,758331,364258,693597,82283,e=>{"use strict";var t=e.i(401564),a=e.i(360334),r=e.i(376527);let n={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5,transactionsHistory:15e3,tokenPrice:15e3,latestAppKitVersion:6048e5},isCacheExpired:(e,t)=>Date.now()-e>t,getActiveNetworkProps(){let e=n.getActiveNamespace(),t=n.getActiveCaipNetworkId(),a=t?t.split(":")[1]:void 0;return{namespace:e,caipNetworkId:t,chainId:a?isNaN(Number(a))?a:Number(a):void 0}},setWalletConnectDeepLink({name:e,href:t}){try{r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.DEEPLINK_CHOICE,JSON.stringify({href:t,name:e}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{let e=r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.DEEPLINK_CHOICE);if(e)return JSON.parse(e)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{r.SafeLocalStorage.removeItem(r.SafeLocalStorageKeys.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(e){try{r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.ACTIVE_NAMESPACE,e)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(e){try{r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.ACTIVE_CAIP_NETWORK_ID,e),n.setActiveNamespace(e.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{r.SafeLocalStorage.removeItem(r.SafeLocalStorageKeys.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(e){try{let t=(0,r.getSafeConnectorIdKey)(e);r.SafeLocalStorage.removeItem(t)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(e){try{let t=n.getRecentWallets();t.find(t=>t.id===e.id)||(t.unshift(e),t.length>2&&t.pop(),r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.RECENT_WALLETS,JSON.stringify(t)),r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.RECENT_WALLET,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{let e=r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.RECENT_WALLETS);return e?JSON.parse(e):[]}catch{console.info("Unable to get AppKit recent")}return[]},getRecentWallet(){try{let e=r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.RECENT_WALLET);return e?JSON.parse(e):null}catch{console.info("Unable to get AppKit recent")}return null},deleteRecentWallet(){try{r.SafeLocalStorage.removeItem(r.SafeLocalStorageKeys.RECENT_WALLET)}catch{console.info("Unable to delete AppKit recent")}},setConnectedConnectorId(e,t){try{let a=(0,r.getSafeConnectorIdKey)(e);r.SafeLocalStorage.setItem(a,t)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(e){if(e)try{let t=(0,r.getSafeConnectorIdKey)(e);return r.SafeLocalStorage.getItem(t)}catch(t){console.info("Unable to get connected connector id in namespace",e)}},setConnectedSocialProvider(e){try{r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.CONNECTED_SOCIAL,e)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{r.SafeLocalStorage.removeItem(r.SafeLocalStorageKeys.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){let e=r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.ACTIVE_CAIP_NETWORK_ID);return e?.split(":")?.[1]},setConnectionStatus(e){try{r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.CONNECTION_STATUS,e)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{let e=r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.CONNECTED_NAMESPACES);if(!e?.length)return[];return e.split(",")}catch{return[]}},setConnectedNamespaces(e){try{let t=Array.from(new Set(e));r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.CONNECTED_NAMESPACES,t.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(e){try{let t=n.getConnectedNamespaces();t.includes(e)||(t.push(e),n.setConnectedNamespaces(t))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(e){try{let t=n.getConnectedNamespaces(),a=t.indexOf(e);a>-1&&(t.splice(a,1),n.setConnectedNamespaces(t))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(e){try{r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.TELEGRAM_SOCIAL_PROVIDER,e)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{r.SafeLocalStorage.removeItem(r.SafeLocalStorageKeys.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let e={};try{let t=r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.PORTFOLIO_CACHE);e=t?JSON.parse(t):{}}catch{console.info("Unable to get balance cache")}return e},removeAddressFromBalanceCache(e){try{let t=n.getBalanceCache();r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.PORTFOLIO_CACHE,JSON.stringify({...t,[e]:void 0}))}catch{console.info("Unable to remove address from balance cache",e)}},getBalanceCacheForCaipAddress(e){try{let t=n.getBalanceCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.portfolio))return t.balance;n.removeAddressFromBalanceCache(e)}catch{console.info("Unable to get balance cache for address",e)}},updateBalanceCache(e){try{let t=n.getBalanceCache();t[e.caipAddress]=e,r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.PORTFOLIO_CACHE,JSON.stringify(t))}catch{console.info("Unable to update balance cache",e)}},getNativeBalanceCache(){let e={};try{let t=r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.NATIVE_BALANCE_CACHE);e=t?JSON.parse(t):{}}catch{console.info("Unable to get balance cache")}return e},removeAddressFromNativeBalanceCache(e){try{let t=n.getBalanceCache();r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.NATIVE_BALANCE_CACHE,JSON.stringify({...t,[e]:void 0}))}catch{console.info("Unable to remove address from balance cache",e)}},getNativeBalanceCacheForCaipAddress(e){try{let t=n.getNativeBalanceCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.nativeBalance))return t;console.info("Discarding cache for address",e),n.removeAddressFromBalanceCache(e)}catch{console.info("Unable to get balance cache for address",e)}},updateNativeBalanceCache(e){try{let t=n.getNativeBalanceCache();t[e.caipAddress]=e,r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.NATIVE_BALANCE_CACHE,JSON.stringify(t))}catch{console.info("Unable to update balance cache",e)}},getEnsCache(){let e={};try{let t=r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.ENS_CACHE);e=t?JSON.parse(t):{}}catch{console.info("Unable to get ens name cache")}return e},getEnsFromCacheForAddress(e){try{let t=n.getEnsCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.ens))return t.ens;n.removeEnsFromCache(e)}catch{console.info("Unable to get ens name from cache",e)}},updateEnsCache(e){try{let t=n.getEnsCache();t[e.address]=e,r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.ENS_CACHE,JSON.stringify(t))}catch{console.info("Unable to update ens name cache",e)}},removeEnsFromCache(e){try{let t=n.getEnsCache();r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.ENS_CACHE,JSON.stringify({...t,[e]:void 0}))}catch{console.info("Unable to remove ens name from cache",e)}},getIdentityCache(){let e={};try{let t=r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.IDENTITY_CACHE);e=t?JSON.parse(t):{}}catch{console.info("Unable to get identity cache")}return e},getIdentityFromCacheForAddress(e){try{let t=n.getIdentityCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.identity))return t.identity;n.removeIdentityFromCache(e)}catch{console.info("Unable to get identity from cache",e)}},updateIdentityCache(e){try{let t=n.getIdentityCache();t[e.address]={identity:e.identity,timestamp:e.timestamp},r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.IDENTITY_CACHE,JSON.stringify(t))}catch{console.info("Unable to update identity cache",e)}},removeIdentityFromCache(e){try{let t=n.getIdentityCache();r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.IDENTITY_CACHE,JSON.stringify({...t,[e]:void 0}))}catch{console.info("Unable to remove identity from cache",e)}},clearAddressCache(){try{r.SafeLocalStorage.removeItem(r.SafeLocalStorageKeys.PORTFOLIO_CACHE),r.SafeLocalStorage.removeItem(r.SafeLocalStorageKeys.NATIVE_BALANCE_CACHE),r.SafeLocalStorage.removeItem(r.SafeLocalStorageKeys.ENS_CACHE),r.SafeLocalStorage.removeItem(r.SafeLocalStorageKeys.IDENTITY_CACHE),r.SafeLocalStorage.removeItem(r.SafeLocalStorageKeys.HISTORY_TRANSACTIONS_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(e){try{r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.PREFERRED_ACCOUNT_TYPES,JSON.stringify(e))}catch{console.info("Unable to set preferred account types",e)}},getPreferredAccountTypes(){try{let e=r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.PREFERRED_ACCOUNT_TYPES);if(!e)return{};return JSON.parse(e)}catch{console.info("Unable to get preferred account types")}return{}},setConnections(e,a){try{let o=n.getConnections(),s=o[a]??[],i=new Map;for(let e of s)i.set(e.connectorId,{...e});for(let a of e){let e=i.get(a.connectorId),r=a.connectorId===t.ConstantsUtil.CONNECTOR_ID.AUTH;if(e&&!r){let t=new Set(e.accounts.map(e=>e.address.toLowerCase())),r=a.accounts.filter(e=>!t.has(e.address.toLowerCase()));e.accounts.push(...r)}else i.set(a.connectorId,{...a})}let c={...o,[a]:Array.from(i.values())};r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.CONNECTIONS,JSON.stringify(c))}catch(e){console.error("Unable to sync connections to storage",e)}},getConnections(){try{let e=r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.CONNECTIONS);if(!e)return{};return JSON.parse(e)}catch(e){return console.error("Unable to get connections from storage",e),{}}},deleteAddressFromConnection({connectorId:e,address:t,namespace:a}){try{let o=n.getConnections(),s=o[a]??[],i=new Map(s.map(e=>[e.connectorId,e])),c=i.get(e);if(c){let a=c.accounts.filter(e=>e.address.toLowerCase()!==t.toLowerCase());0===a.length?i.delete(e):i.set(e,{...c,accounts:c.accounts.filter(e=>e.address.toLowerCase()!==t.toLowerCase())})}r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.CONNECTIONS,JSON.stringify({...o,[a]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${t}" from connector "${e}" in namespace "${a}"`)}},getDisconnectedConnectorIds(){try{let e=r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.DISCONNECTED_CONNECTOR_IDS);if(!e)return{};return JSON.parse(e)}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(e,t){try{let a=n.getDisconnectedConnectorIds(),o=a[t]??[];o.push(e),r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...a,[t]:Array.from(new Set(o))}))}catch{console.error(`Unable to set disconnected connector id "${e}" for namespace "${t}"`)}},removeDisconnectedConnectorId(e,t){try{let a=n.getDisconnectedConnectorIds(),o=a[t]??[];o=o.filter(t=>t.toLowerCase()!==e.toLowerCase()),r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...a,[t]:Array.from(new Set(o))}))}catch{console.error(`Unable to remove disconnected connector id "${e}" for namespace "${t}"`)}},isConnectorDisconnected(e,t){try{return(n.getDisconnectedConnectorIds()[t]??[]).some(t=>t.toLowerCase()===e.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${e}" for namespace "${t}"`)}return!1},getTransactionsCache(){try{let e=r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.HISTORY_TRANSACTIONS_CACHE);return e?JSON.parse(e):{}}catch{console.info("Unable to get transactions cache")}return{}},getTransactionsCacheForAddress({address:e,chainId:t=""}){try{let a=n.getTransactionsCache(),r=a[e]?.[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.transactionsHistory))return r.transactions;n.removeTransactionsCache({address:e,chainId:t})}catch{console.info("Unable to get transactions cache")}},updateTransactionsCache({address:e,chainId:t="",timestamp:a,transactions:o}){try{let s=n.getTransactionsCache();s[e]={...s[e],[t]:{timestamp:a,transactions:o}},r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.HISTORY_TRANSACTIONS_CACHE,JSON.stringify(s))}catch{console.info("Unable to update transactions cache",{address:e,chainId:t,timestamp:a,transactions:o})}},removeTransactionsCache({address:e,chainId:t}){try{let a=n.getTransactionsCache(),{[t]:o,...s}=a?.[e]||{};r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.HISTORY_TRANSACTIONS_CACHE,JSON.stringify({...a,[e]:s}))}catch{console.info("Unable to remove transactions cache",{address:e,chainId:t})}},getTokenPriceCache(){try{let e=r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.TOKEN_PRICE_CACHE);return e?JSON.parse(e):{}}catch{console.info("Unable to get token price cache")}return{}},getTokenPriceCacheForAddresses(e){try{let t=n.getTokenPriceCache()[e.join(",")];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.tokenPrice))return t.tokenPrice;n.removeTokenPriceCache(e)}catch{console.info("Unable to get token price cache for addresses",e)}},updateTokenPriceCache(e){try{let t=n.getTokenPriceCache();t[e.addresses.join(",")]={timestamp:e.timestamp,tokenPrice:e.tokenPrice},r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.TOKEN_PRICE_CACHE,JSON.stringify(t))}catch{console.info("Unable to update token price cache",e)}},removeTokenPriceCache(e){try{let t=n.getTokenPriceCache();r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.TOKEN_PRICE_CACHE,JSON.stringify({...t,[e.join(",")]:void 0}))}catch{console.info("Unable to remove token price cache",e)}},getLatestAppKitVersion(){try{let e=this.getLatestAppKitVersionCache(),t=e?.version;if(t&&!this.isCacheExpired(e.timestamp,this.cacheExpiry.latestAppKitVersion))return t}catch{console.info("Unable to get latest AppKit version")}},getLatestAppKitVersionCache(){try{let e=r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.LATEST_APPKIT_VERSION);return e?JSON.parse(e):{}}catch{console.info("Unable to get latest AppKit version cache")}return{}},updateLatestAppKitVersion(e){try{let t=n.getLatestAppKitVersionCache();t.timestamp=e.timestamp,t.version=e.version,r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.LATEST_APPKIT_VERSION,JSON.stringify(t))}catch{console.info("Unable to update latest AppKit version on local storage",e)}}};e.s(["StorageUtil",0,n],758331);let o={isMobile(){return!!this.isClient()&&!!(window?.matchMedia&&"function"==typeof window.matchMedia&&window.matchMedia("(pointer:coarse)")?.matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent))},checkCaipNetwork:(e,t="")=>e?.caipNetworkId.toLocaleLowerCase().includes(t.toLowerCase()),isAndroid(){if(!this.isMobile())return!1;let e=window?.navigator.userAgent.toLowerCase();return o.isMobile()&&e.includes("android")},isIos(){if(!this.isMobile())return!1;let e=window?.navigator.userAgent.toLowerCase();return e.includes("iphone")||e.includes("ipad")},isSafari(){return!!this.isClient()&&(window?.navigator.userAgent.toLowerCase()).includes("safari")},isClient:()=>"undefined"!=typeof window,isPairingExpired:e=>!e||e-Date.now()<=a.ConstantsUtil.TEN_SEC_MS,isAllowedRetry:(e,t=a.ConstantsUtil.ONE_SEC_MS)=>Date.now()-e>=t,copyToClopboard(e){navigator.clipboard.writeText(e)},isIframe(){try{return window?.self!==window?.top}catch(e){return!1}},isSafeApp(){if(o.isClient()&&window.self!==window.top)try{let e=window?.location?.ancestorOrigins?.[0];if(e){let t=new URL(e),a=new URL("https://app.safe.global");return t.hostname===a.hostname}}catch{}return!1},getPairingExpiry:()=>Date.now()+a.ConstantsUtil.FOUR_MINUTES_MS,getNetworkId:e=>e?.split(":")[1],getPlainAddress:e=>e?.split(":")[2],wait:async e=>new Promise(t=>{setTimeout(t,e)}),debounce(e,t=500){let a;return(...r)=>{a&&clearTimeout(a),a=setTimeout(function(){e(...r)},t)}},isHttpUrl:e=>e.startsWith("http://")||e.startsWith("https://"),formatNativeUrl(e,t,a=null){if(o.isHttpUrl(e))return this.formatUniversalUrl(e,t);let r=e,n=a;r.includes("://")||(r=e.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),n&&!n?.endsWith("/")&&(n=`${n}/`),this.isTelegram()&&this.isAndroid()&&(t=encodeURIComponent(t));let s=encodeURIComponent(t);return{redirect:`${r}wc?uri=${s}`,redirectUniversalLink:n?`${n}wc?uri=${s}`:void 0,href:r}},formatUniversalUrl(e,t){if(!o.isHttpUrl(e))return this.formatNativeUrl(e,t);let a=e;a.endsWith("/")||(a=`${a}/`);let r=encodeURIComponent(t);return{redirect:`${a}wc?uri=${r}`,href:a}},getOpenTargetForPlatform(e){return"popupWindow"===e?e:this.isTelegram()?n.getTelegramSocialProvider()?"_top":"_blank":e},openHref(e,t,a){window?.open(e,this.getOpenTargetForPlatform(t),a||"noreferrer noopener")},returnOpenHref(e,t,a){return window?.open(e,this.getOpenTargetForPlatform(t),a||"noreferrer noopener")},isTelegram:()=>"undefined"!=typeof window&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto),isPWA(){if("undefined"==typeof window)return!1;let e=!!window?.matchMedia&&"function"==typeof window.matchMedia&&window.matchMedia("(display-mode: standalone)")?.matches,t=window?.navigator?.standalone;return!!(e||t)},preloadImage:async e=>Promise.race([new Promise((t,a)=>{let r=new Image;r.onload=t,r.onerror=a,r.crossOrigin="anonymous",r.src=e}),o.wait(2e3)]),parseBalance(e,t){let a="0.000";if("string"==typeof e){let t=Number(e);if(!isNaN(t)){let e=(Math.floor(1e3*t)/1e3).toFixed(3);e&&(a=e)}}let[r,n]=a.split("."),o=r||"0",s=n||"000";return{formattedText:`${o}.${s}${t?` ${t}`:""}`,value:o,decimals:s,symbol:t}},getApiUrl:()=>t.ConstantsUtil.W3M_API_URL,getBlockchainApiUrl:()=>t.ConstantsUtil.BLOCKCHAIN_API_RPC_URL,getAnalyticsUrl:()=>t.ConstantsUtil.PULSE_API_URL,getUUID:()=>crypto?.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),parseError:e=>"string"==typeof e?e:"string"==typeof e?.issues?.[0]?.message?e.issues[0].message:e instanceof Error?e.message:"Unknown error",sortRequestedNetworks(e,t=[]){let a={};return t&&e&&(e.forEach((e,t)=>{a[e]=t}),t.sort((e,t)=>{let r=a[e.id],n=a[t.id];return void 0!==r&&void 0!==n?r-n:void 0!==r?-1:1*(void 0!==n)})),t},calculateBalance(e){let t=0;for(let a of e)t+=a.value??0;return t},formatTokenBalance(e){let[t,a]=e.toFixed(2).split(".");return{dollars:t,pennies:a}},isAddress(e,t="eip155"){switch(t){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(e)&&(/^(?:0x)?[0-9a-f]{40}$/iu.test(e)||/^(?:0x)?[0-9A-F]{40}$/iu.test(e)))return!0;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(e);default:return!1}},uniqueBy(e,t){let a=new Set;return e.filter(e=>{let r=e[t];return!a.has(r)&&(a.add(r),!0)})},generateSdkVersion(e,t,r){let n=0===e.length?a.ConstantsUtil.ADAPTER_TYPES.UNIVERSAL:e.map(e=>e.adapterType).join(",");return`${t}-${n}-${r}`},createAccount:(e,t,a,r,n)=>({namespace:e,address:t,type:a,publicKey:r,path:n}),isCaipAddress(e){if("string"!=typeof e)return!1;let a=e.split(":"),r=a[0];return 3===a.filter(Boolean).length&&r in t.ConstantsUtil.CHAIN_NAME_MAP},getAccount:e=>e?"string"==typeof e?{address:e,chainId:void 0}:{address:e.address,chainId:e.chainId}:{address:void 0,chainId:void 0},isMac(){let e=window?.navigator.userAgent.toLowerCase();return e.includes("macintosh")&&!e.includes("safari")},formatTelegramSocialLoginUrl(e){let t=`--${encodeURIComponent(window?.location.href)}`,a="state=";if("auth.magic.link"===new URL(e).host){let r="provider_authorization_url=",n=e.substring(e.indexOf(r)+r.length),o=this.injectIntoUrl(decodeURIComponent(n),a,t);return e.replace(n,encodeURIComponent(o))}return this.injectIntoUrl(e,a,t)},injectIntoUrl(e,t,a){let r=e.indexOf(t);if(-1===r)throw Error(`${t} parameter not found in the URL: ${e}`);let n=e.indexOf("&",r),o=t.length,s=-1!==n?n:e.length;return e.substring(0,r+o)+(e.substring(r+o,s)+a)+e.substring(n)}};async function s(...e){let t=await fetch(...e);if(!t.ok)throw Error(`HTTP status code: ${t.status}`,{cause:t});return t}e.s(["CoreHelperUtil",0,o],227302);class i{constructor({baseUrl:e,clientId:t}){this.baseUrl=e,this.clientId=t}async get({headers:e,signal:t,cache:a,...r}){let n=this.createUrl(r);return(await s(n,{method:"GET",headers:e,signal:t,cache:a})).json()}async getBlob({headers:e,signal:t,...a}){let r=this.createUrl(a);return(await s(r,{method:"GET",headers:e,signal:t})).blob()}async post({body:e,headers:t,signal:a,...r}){let n=this.createUrl(r);return(await s(n,{method:"POST",headers:t,body:e?JSON.stringify(e):void 0,signal:a})).json()}async put({body:e,headers:t,signal:a,...r}){let n=this.createUrl(r);return(await s(n,{method:"PUT",headers:t,body:e?JSON.stringify(e):void 0,signal:a})).json()}async delete({body:e,headers:t,signal:a,...r}){let n=this.createUrl(r);return(await s(n,{method:"DELETE",headers:t,body:e?JSON.stringify(e):void 0,signal:a})).json()}createUrl({path:e,params:t}){let a=new URL(e,this.baseUrl);return t&&Object.entries(t).forEach(([e,t])=>{t&&a.searchParams.append(e,t)}),this.clientId&&a.searchParams.append("clientId",this.clientId),a}sendBeacon({body:e,...t}){let a=this.createUrl(t);return navigator.sendBeacon(a.toString(),e?JSON.stringify(e):void 0)}}e.s(["FetchUtil",()=>i],364258),e.s(["OptionsController",()=>C],82283);var c=e.i(365801),l=e.i(742710);e.s(["OptionsUtil",()=>d],693597);let d={getFeatureValue(e,t){let r=t?.[e];return void 0===r?a.ConstantsUtil.DEFAULT_FEATURES[e]:r},filterSocialsByPlatform(e){if(!e||!e.length)return e;let t=e;return o.isTelegram()&&(o.isIos()&&(t=t.filter(e=>"google"!==e)),o.isMac()&&(t=t.filter(e=>"x"!==e)),o.isAndroid()&&(t=t.filter(e=>!["facebook","x"].includes(e)))),o.isMobile()&&(t=t.filter(e=>"facebook"!==e)),t},isSocialsEnabled:()=>Array.isArray(C.state.features?.socials)&&C.state.features?.socials.length>0||Array.isArray(C.state.remoteFeatures?.socials)&&C.state.remoteFeatures?.socials.length>0,isEmailEnabled:()=>!!(C.state.features?.email||C.state.remoteFeatures?.email)},p=(0,c.proxy)({features:a.ConstantsUtil.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:a.ConstantsUtil.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{},enableMobileFullScreen:!1,coinbasePreference:"all"}),C={state:p,subscribeKey:(e,t)=>(0,l.subscribeKey)(p,e,t),setOptions(e){Object.assign(p,e)},setRemoteFeatures(e){if(!e)return;let t={...p.remoteFeatures,...e};p.remoteFeatures=t,p.remoteFeatures?.socials&&(p.remoteFeatures.socials=d.filterSocialsByPlatform(p.remoteFeatures.socials)),p.features?.pay&&(p.remoteFeatures.email=!1,p.remoteFeatures.socials=!1)},setFeatures(e){if(!e)return;p.features||(p.features=a.ConstantsUtil.DEFAULT_FEATURES);let t={...p.features,...e};p.features=t,p.features?.pay&&p.remoteFeatures&&(p.remoteFeatures.email=!1,p.remoteFeatures.socials=!1)},setProjectId(e){p.projectId=e},setCustomRpcUrls(e){p.customRpcUrls=e},setAllWallets(e){p.allWallets=e},setIncludeWalletIds(e){p.includeWalletIds=e},setExcludeWalletIds(e){p.excludeWalletIds=e},setFeaturedWalletIds(e){p.featuredWalletIds=e},setTokens(e){p.tokens=e},setTermsConditionsUrl(e){p.termsConditionsUrl=e},setPrivacyPolicyUrl(e){p.privacyPolicyUrl=e},setCustomWallets(e){p.customWallets=e},setIsSiweEnabled(e){p.isSiweEnabled=e},setIsUniversalProvider(e){p.isUniversalProvider=e},setSdkVersion(e){p.sdkVersion=e},setMetadata(e){p.metadata=e},setDisableAppend(e){p.disableAppend=e},setEIP6963Enabled(e){p.enableEIP6963=e},setDebug(e){p.debug=e},setEnableWalletGuide(e){p.enableWalletGuide=e},setEnableAuthLogger(e){p.enableAuthLogger=e},setEnableWallets(e){p.enableWallets=e},setPreferUniversalLinks(e){p.experimental_preferUniversalLinks=e},setSIWX(e){if(e)for(let[t,r]of Object.entries(a.ConstantsUtil.SIWX_DEFAULTS))e[t]??=r;p.siwx=e},setConnectMethodsOrder(e){p.features={...p.features,connectMethodsOrder:e}},setWalletFeaturesOrder(e){p.features={...p.features,walletFeaturesOrder:e}},setSocialsOrder(e){p.remoteFeatures={...p.remoteFeatures,socials:e}},setCollapseWallets(e){p.features={...p.features,collapseWallets:e}},setEnableEmbedded(e){p.enableEmbedded=e},setAllowUnsupportedChain(e){p.allowUnsupportedChain=e},setManualWCControl(e){p.manualWCControl=e},setEnableNetworkSwitch(e){p.enableNetworkSwitch=e},setEnableMobileFullScreen(e){p.enableMobileFullScreen=o.isMobile()&&e},setEnableReconnect(e){p.enableReconnect=e},setCoinbasePreference(e){p.coinbasePreference=e},setDefaultAccountTypes(e={}){Object.entries(e).forEach(([e,t])=>{t&&(p.defaultAccountTypes[e]=t)})},setUniversalProviderConfigOverride(e){p.universalProviderConfigOverride=e},getUniversalProviderConfigOverride:()=>p.universalProviderConfigOverride,getSnapshot:()=>(0,c.snapshot)(p)}},24742,811424,90068,e=>{"use strict";e.s(["BlockchainApiController",()=>h],24742);var t=e.i(365801),a=e.i(360334),r=e.i(227302),n=e.i(364258),o=e.i(758331),s=e.i(960398),i=e.i(82283),c=e.i(742710);let l=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),d=(0,t.proxy)({...l}),p={state:d,subscribeKey:(e,t)=>(0,c.subscribeKey)(d,e,t),showLoading(e,t={}){this._showMessage({message:e,variant:"loading",...t})},showSuccess(e){this._showMessage({message:e,variant:"success"})},showSvg(e,t){this._showMessage({message:e,svg:t})},showError(e){let t=r.CoreHelperUtil.parseError(e);this._showMessage({message:t,variant:"error"})},hide(){d.message=l.message,d.variant=l.variant,d.svg=l.svg,d.open=l.open,d.autoClose=l.autoClose},_showMessage({message:e,svg:t,variant:a="success",autoClose:r=l.autoClose}){d.open?(d.open=!1,setTimeout(()=>{d.message=e,d.variant=a,d.svg=t,d.open=!0,d.autoClose=r},150)):(d.message=e,d.variant=a,d.svg=t,d.open=!0,d.autoClose=r)}};e.s(["SnackController",0,p],811424);let C={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},E=r.CoreHelperUtil.getBlockchainApiUrl(),u=(0,t.proxy)({clientId:null,api:new n.FetchUtil({baseUrl:E,clientId:null}),supportedChains:{http:[],ws:[]}}),h={state:u,async get(e){let{st:t,sv:a}=h.getSdkProperties(),r=i.OptionsController.state.projectId,n={...e.params||{},st:t,sv:a,projectId:r};return u.api.get({...e,params:n})},getSdkProperties(){let{sdkType:e,sdkVersion:t}=i.OptionsController.state;return{st:e||"unknown",sv:t||"unknown"}},async isNetworkSupported(e){if(!e)return!1;try{u.supportedChains.http.length||await h.getSupportedNetworks()}catch(e){return!1}return u.supportedChains.http.includes(e)},async getSupportedNetworks(){try{let e=await h.get({path:"v1/supported-chains"});return u.supportedChains=e,e}catch{return u.supportedChains}},async fetchIdentity({address:e}){let t=o.StorageUtil.getIdentityFromCacheForAddress(e);if(t)return t;let a=await h.get({path:`/v1/identity/${e}`,params:{sender:s.ChainController.state.activeCaipAddress?r.CoreHelperUtil.getPlainAddress(s.ChainController.state.activeCaipAddress):void 0}});return o.StorageUtil.updateIdentityCache({address:e,identity:a,timestamp:Date.now()}),a},async fetchTransactions({account:e,cursor:t,signal:a,cache:r,chainId:n}){if(!await h.isNetworkSupported(s.ChainController.state.activeCaipNetwork?.caipNetworkId))return{data:[],next:void 0};let i=o.StorageUtil.getTransactionsCacheForAddress({address:e,chainId:n});if(i)return i;let c=await h.get({path:`/v1/account/${e}/history`,params:{cursor:t,chainId:n},signal:a,cache:r});return o.StorageUtil.updateTransactionsCache({address:e,chainId:n,timestamp:Date.now(),transactions:c}),c},fetchSwapQuote:async({amount:e,userAddress:t,from:a,to:r,gasPrice:n})=>await h.isNetworkSupported(s.ChainController.state.activeCaipNetwork?.caipNetworkId)?h.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:e,userAddress:t,from:a,to:r,gasPrice:n}}):{quotes:[]},fetchSwapTokens:async({chainId:e})=>await h.isNetworkSupported(s.ChainController.state.activeCaipNetwork?.caipNetworkId)?h.get({path:"/v1/convert/tokens",params:{chainId:e}}):{tokens:[]},async fetchTokenPrice({addresses:e}){if(!await h.isNetworkSupported(s.ChainController.state.activeCaipNetwork?.caipNetworkId))return{fungibles:[]};let t=o.StorageUtil.getTokenPriceCacheForAddresses(e);if(t)return t;let a=await u.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:e,projectId:i.OptionsController.state.projectId},headers:{"Content-Type":"application/json"}});return o.StorageUtil.updateTokenPriceCache({addresses:e,timestamp:Date.now(),tokenPrice:a}),a},fetchSwapAllowance:async({tokenAddress:e,userAddress:t})=>await h.isNetworkSupported(s.ChainController.state.activeCaipNetwork?.caipNetworkId)?h.get({path:"/v1/convert/allowance",params:{tokenAddress:e,userAddress:t},headers:{"Content-Type":"application/json"}}):{allowance:"0"},async fetchGasPrice({chainId:e}){let{st:t,sv:a}=h.getSdkProperties();if(!await h.isNetworkSupported(s.ChainController.state.activeCaipNetwork?.caipNetworkId))throw Error("Network not supported for Gas Price");return h.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:e,st:t,sv:a}})},async generateSwapCalldata({amount:e,from:t,to:r,userAddress:n,disableEstimate:o}){if(!await h.isNetworkSupported(s.ChainController.state.activeCaipNetwork?.caipNetworkId))throw Error("Network not supported for Swaps");return u.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:e,eip155:{slippage:a.ConstantsUtil.CONVERT_SLIPPAGE_TOLERANCE},projectId:i.OptionsController.state.projectId,from:t,to:r,userAddress:n,disableEstimate:o}})},async generateApproveCalldata({from:e,to:t,userAddress:a}){let{st:r,sv:n}=h.getSdkProperties();if(!await h.isNetworkSupported(s.ChainController.state.activeCaipNetwork?.caipNetworkId))throw Error("Network not supported for Swaps");return h.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:a,from:e,to:t,st:r,sv:n}})},async getBalance(e,t,a){let{st:r,sv:n}=h.getSdkProperties();if(!await h.isNetworkSupported(s.ChainController.state.activeCaipNetwork?.caipNetworkId))return p.showError("Token Balance Unavailable"),{balances:[]};let i=`${t}:${e}`,c=o.StorageUtil.getBalanceCacheForCaipAddress(i);if(c)return c;let l=await h.get({path:`/v1/account/${e}/balance`,params:{currency:"usd",chainId:t,forceUpdate:a,st:r,sv:n}});return o.StorageUtil.updateBalanceCache({caipAddress:i,balance:l,timestamp:Date.now()}),l},lookupEnsName:async e=>await h.isNetworkSupported(s.ChainController.state.activeCaipNetwork?.caipNetworkId)?h.get({path:`/v1/profile/account/${e}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]},async reverseLookupEnsName({address:e}){if(!await h.isNetworkSupported(s.ChainController.state.activeCaipNetwork?.caipNetworkId))return[];let t=s.ChainController.getAccountData()?.address;return h.get({path:`/v1/profile/reverse/${e}`,params:{sender:t,apiVersion:"2"}})},getEnsNameSuggestions:async e=>await h.isNetworkSupported(s.ChainController.state.activeCaipNetwork?.caipNetworkId)?h.get({path:`/v1/profile/suggestions/${e}`,params:{zone:"reown.id"}}):{suggestions:[]},registerEnsName:async({coinType:e,address:t,message:a,signature:r})=>await h.isNetworkSupported(s.ChainController.state.activeCaipNetwork?.caipNetworkId)?u.api.post({path:"/v1/profile/account",body:{coin_type:e,address:t,message:a,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1},generateOnRampURL:async({destinationWallets:e,partnerUserId:t,defaultNetwork:a,purchaseAmount:r,paymentAmount:n})=>await h.isNetworkSupported(s.ChainController.state.activeCaipNetwork?.caipNetworkId)?(await u.api.post({path:"/v1/generators/onrampurl",params:{projectId:i.OptionsController.state.projectId},body:{destinationWallets:e,defaultNetwork:a,partnerUserId:t,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:n}})).url:"",async getOnrampOptions(){if(!await h.isNetworkSupported(s.ChainController.state.activeCaipNetwork?.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await h.get({path:"/v1/onramp/options"})}catch(e){return C}},async getOnrampQuote({purchaseCurrency:e,paymentCurrency:t,amount:a,network:r}){try{if(!await h.isNetworkSupported(s.ChainController.state.activeCaipNetwork?.caipNetworkId))return null;return await u.api.post({path:"/v1/onramp/quote",params:{projectId:i.OptionsController.state.projectId},body:{purchaseCurrency:e,paymentCurrency:t,amount:a,network:r}})}catch(e){return{networkFee:{amount:a,currency:t.id},paymentSubtotal:{amount:a,currency:t.id},paymentTotal:{amount:a,currency:t.id},purchaseAmount:{amount:a,currency:t.id},quoteId:"mocked-quote-id"}}},getSmartSessions:async e=>await h.isNetworkSupported(s.ChainController.state.activeCaipNetwork?.caipNetworkId)?h.get({path:`/v1/sessions/${e}`}):[],revokeSmartSession:async(e,t,a)=>await h.isNetworkSupported(s.ChainController.state.activeCaipNetwork?.caipNetworkId)?u.api.post({path:`/v1/sessions/${e}/revoke`,params:{projectId:i.OptionsController.state.projectId},body:{pci:t,signature:a}}):{success:!1},setClientId(e){u.clientId=e,u.api=new n.FetchUtil({baseUrl:E,clientId:e})}};function m(e,t){return"light"===t?{"--w3m-accent":e?.["--w3m-accent"]||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":e?.["--w3m-accent"]||"hsla(230, 100%, 67%, 1)","--w3m-background":"#202020"}}e.s(["getW3mThemeVariables",()=>m],90068)},411249,e=>{"use strict";e.s(["CUSTOM_DEEPLINK_WALLETS",()=>r,"MobileWalletUtil",()=>n]);var t=e.i(401564),a=e.i(960398);let r={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"},BINANCE:{id:"2fafea35bb471d22889ccb49c08d99dd0a18a37982602c33f696a5723934ba25",appId:"yFK5FCqYprrXDiVFbhyRx7",deeplink:"bnc://app.binance.com/mp/app",url:"https://app.binance.com/en/download"}},n={handleMobileDeeplinkRedirect(e,n){let o=window.location.href,s=encodeURIComponent(o);if(e===r.PHANTOM.id&&!("phantom"in window)){let e=o.startsWith("https")?"https":"http",t=o.split("/")[2],a=encodeURIComponent(`${e}://${t}`);window.location.href=`${r.PHANTOM.url}/ul/browse/${s}?ref=${a}`}if(e!==r.SOLFLARE.id||"solflare"in window||(window.location.href=`${r.SOLFLARE.url}/ul/v1/browse/${s}?ref=${s}`),n!==t.ConstantsUtil.CHAIN.SOLANA||e!==r.COINBASE.id||"coinbaseSolana"in window||(window.location.href=`${r.COINBASE.url}/dapp?cb_url=${s}`),n===t.ConstantsUtil.CHAIN.BITCOIN&&e===r.BINANCE.id&&!("binancew3w"in window)){let e=a.ChainController.state.activeCaipNetwork,t=window.btoa("/pages/browser/index"),n=window.btoa(`url=${s}&defaultChainId=${e?.id??1}`),o=new URL(r.BINANCE.deeplink);o.searchParams.set("appId",r.BINANCE.appId),o.searchParams.set("startPagePath",t),o.searchParams.set("startPageQuery",n);let i=new URL(r.BINANCE.url);i.searchParams.set("_dp",window.btoa(o.toString())),window.location.href=i.toString()}}}},436220,592279,241845,e=>{"use strict";e.s(["AssetUtil",()=>g],436220);var t=e.i(365801),a=e.i(886259),r=e.i(742710),n=e.i(227302),o=e.i(364258),s=e.i(82283);let i=Object.freeze({enabled:!0,events:[]}),c=new o.FetchUtil({baseUrl:n.CoreHelperUtil.getAnalyticsUrl(),clientId:null}),l=(0,t.proxy)({...i}),d={state:l,subscribeKey:(e,t)=>(0,r.subscribeKey)(l,e,t),async sendError(e,t){if(!l.enabled)return;let a=Date.now();if(l.events.filter(e=>a-new Date(e.properties.timestamp||"").getTime()<6e4).length>=5)return;let r={type:"error",event:t,properties:{errorType:e.name,errorMessage:e.message,stackTrace:e.stack,timestamp:new Date().toISOString()}};l.events.push(r);try{if("undefined"==typeof window)return;let{projectId:a,sdkType:r,sdkVersion:o}=s.OptionsController.state;await c.post({path:"/e",params:{projectId:a,st:r,sv:o||"html-wagmi-4.2.2"},body:{eventId:n.CoreHelperUtil.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:t,errorType:e.name,errorMessage:e.message,stackTrace:e.stack}}})}catch{}},enable(){l.enabled=!0},disable(){l.enabled=!1},clearEvents(){l.events=[]}};class p extends Error{constructor(e,t,a){super(e),this.originalName="AppKitError",this.name="AppKitError",this.category=t,this.originalError=a,a&&a instanceof Error&&(this.originalName=a.name),Object.setPrototypeOf(this,p.prototype);let r=!1;if(a instanceof Error&&"string"==typeof a.stack&&a.stack){const e=a.stack,t=e.indexOf("\n");if(t>-1){const a=e.substring(t+1);this.stack=`${this.name}: ${this.message}
${a}`,r=!0}}!r&&(Error.captureStackTrace?Error.captureStackTrace(this,p):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function C(e,t){let a="";try{a=e instanceof Error?e.message:"string"==typeof e?e:"object"==typeof e&&null!==e?0===Object.keys(e).length?"Unknown error":e?.message||JSON.stringify(e):String(e)}catch(e){a="Unknown error",console.error("Error parsing error message",e)}let r=e instanceof p?e:new p(a,t,e);throw d.sendError(r,r.category),r}function E(e,t="INTERNAL_SDK_ERROR"){let a={};return Object.keys(e).forEach(r=>{let n=e[r];if("function"==typeof n){let e=n;e="AsyncFunction"===n.constructor.name?async(...e)=>{try{return await n(...e)}catch(e){return C(e,t)}}:(...e)=>{try{return n(...e)}catch(e){return C(e,t)}},a[r]=e}else a[r]=n}),a}e.s(["AppKitError",()=>p,"withErrorBoundary",()=>E],592279);let u=(0,t.proxy)({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),h=E({state:u,subscribeNetworkImages:e=>(0,t.subscribe)(u.networkImages,()=>e(u.networkImages)),subscribeKey:(e,t)=>(0,r.subscribeKey)(u,e,t),subscribe:e=>(0,t.subscribe)(u,()=>e(u)),setWalletImage(e,t){u.walletImages[e]=t},setNetworkImage(e,t){u.networkImages[e]=t},setChainImage(e,t){u.chainImages[e]=t},setConnectorImage(e,t){u.connectorImages={...u.connectorImages,[e]:t}},setTokenImage(e,t){u.tokenImages[e]=t},setCurrencyImage(e,t){u.currencyImages[e]=t}});e.s(["AssetController",0,h],241845);let m={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:"",sui:"",stacks:""},S=(0,t.proxy)({networkImagePromises:{}}),g={async fetchWalletImage(e){if(e)return await a.ApiController._fetchWalletImage(e),this.getWalletImageById(e)},async fetchNetworkImage(e){if(!e)return;let t=this.getNetworkImageById(e);return t||(S.networkImagePromises[e]||(S.networkImagePromises[e]=a.ApiController._fetchNetworkImage(e)),await S.networkImagePromises[e],this.getNetworkImageById(e))},getWalletImageById(e){if(e)return h.state.walletImages[e]},getWalletImage:e=>e?.image_url?e?.image_url:e?.image_id?h.state.walletImages[e.image_id]:void 0,getNetworkImage:e=>e?.assets?.imageUrl?e?.assets?.imageUrl:e?.assets?.imageId?h.state.networkImages[e.assets.imageId]:void 0,getNetworkImageById(e){if(e)return h.state.networkImages[e]},getConnectorImage:e=>e?.imageUrl?e.imageUrl:e?.info?.icon?e.info.icon:e?.imageId?h.state.connectorImages[e.imageId]:void 0,getChainImage:e=>h.state.networkImages[m[e]],getTokenImage(e){if(e)return h.state.tokenImages[e]}}},653157,e=>{"use strict";e.s(["EventsController",()=>d]);var t=e.i(365801),a=e.i(227302),r=e.i(364258),n=e.i(960398),o=e.i(82283);let s=a.CoreHelperUtil.getAnalyticsUrl(),i=new r.FetchUtil({baseUrl:s,clientId:null}),c=["MODAL_CREATED"],l=(0,t.proxy)({timestamp:Date.now(),lastFlush:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"},pendingEvents:[],subscribedToVisibilityChange:!1,walletImpressions:[]}),d={state:l,subscribe:e=>(0,t.subscribe)(l,()=>e(l)),getSdkProperties(){let{projectId:e,sdkType:t,sdkVersion:a}=o.OptionsController.state;return{projectId:e,st:t,sv:a||"html-wagmi-4.2.2"}},shouldFlushEvents(){let e=JSON.stringify(l.pendingEvents).length/1024>45,t=l.lastFlush+1e4<Date.now();return e||t},_setPendingEvent(e){try{let t=n.ChainController.getAccountData()?.address;if("address"in e.data&&e.data.address&&(t=e.data.address),c.includes(e.data.event)||"undefined"==typeof window)return;let r=n.ChainController.getActiveCaipNetwork()?.caipNetworkId;this.state.pendingEvents.push({eventId:a.CoreHelperUtil.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:e.timestamp,props:{...e.data,address:t,properties:{..."properties"in e.data?e.data.properties:{},caipNetworkId:r}}}),l.reportedErrors.FORBIDDEN=!1,d.shouldFlushEvents()&&d._submitPendingEvents()}catch(e){console.warn("_setPendingEvent",e)}},sendEvent(e){l.timestamp=Date.now(),l.data=e,(o.OptionsController.state.features?.analytics||["INITIALIZE","CONNECT_SUCCESS","SOCIAL_LOGIN_SUCCESS"].includes(e.event))&&d._setPendingEvent(l),this.subscribeToFlushTriggers()},sendWalletImpressionEvent(e){l.walletImpressions.push(e)},_transformPendingEventsForBatch(e){try{return e.filter(e=>{let t=e.props.event;return"WALLET_IMPRESSION_V2"!==t})}catch{return e}},_submitPendingEvents(){if(l.lastFlush=Date.now(),0!==l.pendingEvents.length||0!==l.walletImpressions.length)try{let e=d._transformPendingEventsForBatch(l.pendingEvents);l.walletImpressions.length&&e.push({eventId:a.CoreHelperUtil.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:Date.now(),props:{type:"track",event:"WALLET_IMPRESSION_V2",items:[...l.walletImpressions]}}),i.sendBeacon({path:"/batch",params:d.getSdkProperties(),body:e}),l.reportedErrors.FORBIDDEN=!1,l.pendingEvents=[],l.walletImpressions=[]}catch(e){l.reportedErrors.FORBIDDEN=!0}},subscribeToFlushTriggers(){l.subscribedToVisibilityChange||"undefined"!=typeof document&&(l.subscribedToVisibilityChange=!0,document?.addEventListener?.("visibilitychange",()=>{"hidden"===document.visibilityState&&d._submitPendingEvents()}),document?.addEventListener?.("freeze",()=>{d._submitPendingEvents()}),window?.addEventListener?.("pagehide",()=>{d._submitPendingEvents()}),setInterval(()=>{d._submitPendingEvents()},1e4))}}},886259,e=>{"use strict";e.s(["ApiController",()=>S]);var t=e.i(365801),a=e.i(742710),r=e.i(401564),n=e.i(436220),o=e.i(227302),s=e.i(364258),i=e.i(411249),c=e.i(758331),l=e.i(241845),d=e.i(960398),p=e.i(149454),C=e.i(653157),E=e.i(82283);let u=o.CoreHelperUtil.getApiUrl(),h=new s.FetchUtil({baseUrl:u,clientId:null}),m=(0,t.proxy)({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1,explorerWallets:[],explorerFilteredWallets:[],plan:{tier:"none",hasExceededUsageLimit:!1,limits:{isAboveRpcLimit:!1,isAboveMauLimit:!1}}}),S={state:m,subscribeKey:(e,t)=>(0,a.subscribeKey)(m,e,t),_getSdkProperties(){let{projectId:e,sdkType:t,sdkVersion:a}=E.OptionsController.state;return{projectId:e,st:t||"appkit",sv:a||"html-wagmi-4.2.2"}},_filterOutExtensions:e=>E.OptionsController.state.isUniversalProvider?e.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):e,async _fetchWalletImage(e){let t=`${h.baseUrl}/getWalletImage/${e}`,a=await h.getBlob({path:t,params:S._getSdkProperties()});l.AssetController.setWalletImage(e,URL.createObjectURL(a))},async _fetchNetworkImage(e){let t=`${h.baseUrl}/public/getAssetImage/${e}`,a=await h.getBlob({path:t,params:S._getSdkProperties()});l.AssetController.setNetworkImage(e,URL.createObjectURL(a))},async _fetchConnectorImage(e){let t=`${h.baseUrl}/public/getAssetImage/${e}`,a=await h.getBlob({path:t,params:S._getSdkProperties()});l.AssetController.setConnectorImage(e,URL.createObjectURL(a))},async _fetchCurrencyImage(e){let t=`${h.baseUrl}/public/getCurrencyImage/${e}`,a=await h.getBlob({path:t,params:S._getSdkProperties()});l.AssetController.setCurrencyImage(e,URL.createObjectURL(a))},async _fetchTokenImage(e){let t=`${h.baseUrl}/public/getTokenImage/${e}`,a=await h.getBlob({path:t,params:S._getSdkProperties()});l.AssetController.setTokenImage(e,URL.createObjectURL(a))},_filterWalletsByPlatform(e){let t=e.length,a=o.CoreHelperUtil.isMobile()?e?.filter(e=>!!e.mobile_link||!!e.webapp_link||Object.values(i.CUSTOM_DEEPLINK_WALLETS).map(e=>e.id).includes(e.id)):e,r=t-a.length;return{filteredWallets:a,mobileFilteredOutWalletsLength:r}},fetchProjectConfig:async()=>(await h.get({path:"/appkit/v1/config",params:S._getSdkProperties()})).features,async fetchUsage(){try{let{tier:e,isAboveMauLimit:t,isAboveRpcLimit:a}=(await h.get({path:"/appkit/v1/project-limits",params:S._getSdkProperties()})).planLimits;S.state.plan={tier:e,hasExceededUsageLimit:"starter"===e&&(t||a),limits:{isAboveRpcLimit:a,isAboveMauLimit:t}}}catch(e){console.warn("Failed to fetch usage",e)}},async fetchAllowedOrigins(){try{let{allowedOrigins:e}=await h.get({path:"/projects/v1/origins",params:S._getSdkProperties()});return e}catch(e){if(e instanceof Error&&e.cause instanceof Response){let t=e.cause.status;if(t===r.ConstantsUtil.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw Error("RATE_LIMITED",{cause:e});if(t>=r.ConstantsUtil.HTTP_STATUS_CODES.SERVER_ERROR&&t<600)throw Error("SERVER_ERROR",{cause:e})}return[]}},async fetchNetworkImages(){let e=d.ChainController.getAllRequestedCaipNetworks(),t=e?.map(({assets:e})=>e?.imageId).filter(Boolean).filter(e=>!n.AssetUtil.getNetworkImageById(e));t&&await Promise.allSettled(t.map(e=>S._fetchNetworkImage(e)))},async fetchConnectorImages(){let{connectors:e}=p.ConnectorController.state,t=e.map(({imageId:e})=>e).filter(Boolean);await Promise.allSettled(t.map(e=>S._fetchConnectorImage(e)))},async fetchCurrencyImages(e=[]){await Promise.allSettled(e.map(e=>S._fetchCurrencyImage(e)))},async fetchTokenImages(e=[]){await Promise.allSettled(e.map(e=>S._fetchTokenImage(e)))},async fetchWallets(e){let t=e.exclude??[];S._getSdkProperties().sv.startsWith("html-core-")&&t.push(...Object.values(i.CUSTOM_DEEPLINK_WALLETS).map(e=>e.id));let a=await h.get({path:"/getWallets",params:{...S._getSdkProperties(),...e,page:String(e.page),entries:String(e.entries),include:e.include?.join(","),exclude:t.join(",")}}),{filteredWallets:r,mobileFilteredOutWalletsLength:n}=S._filterWalletsByPlatform(a?.data);return{data:r||[],count:a?.count,mobileFilteredOutWalletsLength:n}},async prefetchWalletRanks(){let e=p.ConnectorController.state.connectors;if(!e?.length)return;let t={page:1,entries:20,badge:"certified"};if(t.names=e.map(e=>e.name).join(","),d.ChainController.state.activeChain===r.ConstantsUtil.CHAIN.EVM){let a=[...e.flatMap(e=>e.connectors?.map(e=>e.info?.rdns)||[]),...e.map(e=>e.info?.rdns)].filter(e=>"string"==typeof e&&e.length>0);a.length&&(t.rdns=a.join(","))}let{data:a}=await S.fetchWallets(t);m.explorerWallets=a;let n=d.ChainController.getRequestedCaipNetworkIds().join(",");m.explorerFilteredWallets=a.filter(e=>e.chains?.some(e=>n.includes(e)))},async fetchFeaturedWallets(){let{featuredWalletIds:e}=E.OptionsController.state;if(e?.length){let t={...S._getSdkProperties(),page:1,entries:e?.length??4,include:e},{data:a}=await S.fetchWallets(t),r=[...a].sort((t,a)=>e.indexOf(t.id)-e.indexOf(a.id)),n=r.map(e=>e.image_id).filter(Boolean);await Promise.allSettled(n.map(e=>S._fetchWalletImage(e))),m.featured=r,m.allFeatured=r}},async fetchRecommendedWallets(){try{m.isFetchingRecommendedWallets=!0;let{includeWalletIds:e,excludeWalletIds:t,featuredWalletIds:a}=E.OptionsController.state,r=[...t??[],...a??[]].filter(Boolean),n=d.ChainController.getRequestedCaipNetworkIds().join(","),{data:o,count:s}=await S.fetchWallets({page:1,entries:4,include:e,exclude:r,chains:n}),i=c.StorageUtil.getRecentWallets(),l=o.map(e=>e.image_id).filter(Boolean),p=i.map(e=>e.image_id).filter(Boolean);await Promise.allSettled([...l,...p].map(e=>S._fetchWalletImage(e))),m.recommended=o,m.allRecommended=o,m.count=s??0}catch{}finally{m.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:e}){let{includeWalletIds:t,excludeWalletIds:a,featuredWalletIds:r}=E.OptionsController.state,n=d.ChainController.getRequestedCaipNetworkIds().join(","),s=[...m.recommended.map(({id:e})=>e),...a??[],...r??[]].filter(Boolean),{data:i,count:c,mobileFilteredOutWalletsLength:l}=await S.fetchWallets({page:e,entries:40,include:t,exclude:s,chains:n});m.mobileFilteredOutWalletsLength=l+(m.mobileFilteredOutWalletsLength??0);let p=i.slice(0,20).map(e=>e.image_id).filter(Boolean);await Promise.allSettled(p.map(e=>S._fetchWalletImage(e))),m.wallets=o.CoreHelperUtil.uniqueBy([...m.wallets,...S._filterOutExtensions(i)],"id").filter(e=>e.chains?.some(e=>n.includes(e))),m.count=c>m.count?c:m.count,m.page=e},async initializeExcludedWallets({ids:e}){let t={page:1,entries:e.length,include:e},{data:a}=await S.fetchWallets(t);a&&a.forEach(e=>{m.excludedWallets.push({rdns:e.rdns,name:e.name})})},async searchWallet({search:e,badge:t}){let{includeWalletIds:a,excludeWalletIds:r}=E.OptionsController.state,n=d.ChainController.getRequestedCaipNetworkIds().join(",");m.search=[];let s={page:1,entries:100,search:e?.trim(),badge_type:t,include:a,exclude:r,chains:n},{data:i}=await S.fetchWallets(s);C.EventsController.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:t??"",search:e??""}});let c=i.map(e=>e.image_id).filter(Boolean);await Promise.allSettled([...c.map(e=>S._fetchWalletImage(e)),o.CoreHelperUtil.wait(300)]),m.search=S._filterOutExtensions(i)},initPromise(e,t){let a=m.promises[e];return a||(m.promises[e]=t())},prefetch:({fetchConnectorImages:e=!0,fetchFeaturedWallets:t=!0,fetchRecommendedWallets:a=!0,fetchNetworkImages:r=!0,fetchWalletRanks:n=!0}={})=>Promise.allSettled([e&&S.initPromise("connectorImages",S.fetchConnectorImages),t&&S.initPromise("featuredWallets",S.fetchFeaturedWallets),a&&S.initPromise("recommendedWallets",S.fetchRecommendedWallets),r&&S.initPromise("networkImages",S.fetchNetworkImages),n&&S.initPromise("walletRanks",S.prefetchWalletRanks)].filter(Boolean)),prefetchAnalyticsConfig(){E.OptionsController.state.features?.analytics&&S.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{let{isAnalyticsEnabled:e}=await h.get({path:"/getAnalyticsConfig",params:S._getSdkProperties()});E.OptionsController.setFeatures({analytics:e})}catch(e){E.OptionsController.setFeatures({analytics:!1})}},filterByNamespaces(e){if(!e?.length){m.featured=m.allFeatured,m.recommended=m.allRecommended;return}let t=d.ChainController.getRequestedCaipNetworkIds().join(",");m.featured=m.allFeatured.filter(e=>e.chains?.some(e=>t.includes(e))),m.recommended=m.allRecommended.filter(e=>e.chains?.some(e=>t.includes(e))),m.filteredWallets=m.wallets.filter(e=>e.chains?.some(e=>t.includes(e)))},clearFilterByNamespaces(){m.filteredWallets=[]},setFilterByNamespace(e){if(!e){m.featured=m.allFeatured,m.recommended=m.allRecommended;return}let t=d.ChainController.getRequestedCaipNetworkIds().join(",");m.featured=m.allFeatured.filter(e=>e.chains?.some(e=>t.includes(e))),m.recommended=m.allRecommended.filter(e=>e.chains?.some(e=>t.includes(e))),m.filteredWallets=m.wallets.filter(e=>e.chains?.some(e=>t.includes(e)))}}},798852,e=>{"use strict";e.s(["NetworkUtil",()=>o]);var t=e.i(401564),a=e.i(960398),r=e.i(149454),n=e.i(221728);let o={onSwitchNetwork({network:e,ignoreSwitchConfirmation:o=!1}){let s=a.ChainController.state.activeCaipNetwork,i=a.ChainController.state.activeChain,c=n.RouterController.state.data;if(e.id===s?.id)return;let l=!!a.ChainController.getAccountData(i)?.address,d=!!a.ChainController.getAccountData(e.chainNamespace)?.address,p=e.chainNamespace!==i,C=r.ConnectorController.getConnectorId(i)===t.ConstantsUtil.CONNECTOR_ID.AUTH,E=t.ConstantsUtil.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(t=>t===e.chainNamespace);o||C&&E?n.RouterController.push("SwitchNetwork",{...c,network:e}):l&&p&&!d?n.RouterController.push("SwitchActiveChain",{switchToChain:e.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:e}):n.RouterController.push("SwitchNetwork",{...c,network:e})}}},960398,77277,803468,221728,639403,149454,564126,210087,971080,518887,465166,462579,683075,675457,664717,194712,e=>{"use strict";let t,a;e.s(["ChainController",()=>eR],960398);var r=e.i(365801),n=e.i(742710),o=e.i(401564),s=e.i(681285),i=e.i(150576),c=e.i(979484),l=e.i(824652);e.s(["BalanceUtil",()=>X],518887);var d=e.i(752012),p=e.i(644616),C=e.i(24742);e.s(["ConnectionController",()=>G],971080),e.s(["getActiveCaipNetwork",()=>x,"getActiveNetworkTokenAddress",()=>F,"getPreferredAccountType",()=>W],564126),e.s(["ConnectorController",()=>D],149454);var E=e.i(90068),u=e.i(411249),h=e.i(758331),m=e.i(592279),S=e.i(886259),g=e.i(82283);e.s(["RouterController",()=>v],221728),e.s(["ModalController",()=>T],803468);var f=e.i(227302),A=e.i(798852),_=e.i(653157);let N=(0,r.proxy)({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),w={state:N,subscribe:e=>(0,r.subscribe)(N,()=>e(N)),subscribeOpen:e=>(0,n.subscribeKey)(N,"open",e),set(e){Object.assign(N,{...N,...e})}};e.s(["PublicStateController",0,w],77277);let I=(0,r.proxy)({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),T=(0,m.withErrorBoundary)({state:I,subscribe:e=>(0,r.subscribe)(I,()=>e(I)),subscribeKey:(e,t)=>(0,n.subscribeKey)(I,e,t),async open(e){let t=e?.namespace,a=eR.state.activeChain,r=t&&t!==a,n=eR.getAccountData(e?.namespace)?.caipAddress,o=eR.state.noAdapters;if(G.state.wcBasic?S.ApiController.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1,fetchWalletRanks:!1}):await S.ApiController.prefetch(),D.setFilterByNamespace(e?.namespace),T.setLoading(!0,t),t&&r){let e=eR.getNetworkData(t)?.caipNetwork||eR.getRequestedCaipNetworks(t)[0];e&&(o?(await eR.switchActiveNetwork(e),v.push("ConnectingWalletConnectBasic")):A.NetworkUtil.onSwitchNetwork({network:e,ignoreSwitchConfirmation:!0}))}else g.OptionsController.state.manualWCControl||o&&!n?f.CoreHelperUtil.isMobile()?v.reset("AllWallets"):v.reset("ConnectingWalletConnectBasic"):e?.view?v.reset(e.view,e.data):n?v.reset("Account"):v.reset("Connect");I.open=!0,w.set({open:!0}),_.EventsController.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!n}})},close(){let e=g.OptionsController.state.enableEmbedded,t=!!eR.state.activeCaipAddress;I.open&&_.EventsController.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:t}}),I.open=!1,v.reset("Connect"),T.clearLoading(),e?t?v.replace("Account"):v.push("Connect"):w.set({open:!1}),G.resetUri()},setLoading(e,t){t&&I.loadingNamespaceMap.set(t,e),I.loading=e,w.set({loading:e})},clearLoading(){I.loadingNamespaceMap.clear(),I.loading=!1,w.set({loading:!1})},shake(){I.shake||(I.shake=!0,setTimeout(()=>{I.shake=!1},500))}}),R=["ConnectingExternal","ConnectingMultiChain","ConnectingSocial","ConnectingFarcaster"],y=(0,r.proxy)({view:"Connect",history:["Connect"],transactionStack:[]}),v=(0,m.withErrorBoundary)({state:y,subscribeKey:(e,t)=>(0,n.subscribeKey)(y,e,t),pushTransactionStack(e){y.transactionStack.push(e)},popTransactionStack(e){let t=y.transactionStack.pop();if(!t)return;let{onSuccess:a,onError:r,onCancel:n}=t;switch(e){case"success":a?.();break;case"error":r?.(),v.goBack();break;case"cancel":n?.(),v.goBack()}},push(e,t){let a=e,r=t;S.ApiController.state.plan.hasExceededUsageLimit&&R.includes(e)&&(a="UsageExceeded",r=void 0),a!==y.view&&(y.view=a,y.history.push(a),y.data=r)},reset(e,t){y.view=e,y.history=[e],y.data=t},replace(e,t){y.history.at(-1)!==e&&(y.view=e,y.history[y.history.length-1]=e,y.data=t)},goBack(){let e=eR.state.activeCaipAddress,t="ConnectingFarcaster"===v.state.view,a=!e&&t;if(y.history.length>1){y.history.pop();let[t]=y.history.slice(-1);t&&(e&&"Connect"===t?y.view="Account":y.view=t)}else T.close();y.data?.wallet&&(y.data.wallet=void 0),y.data?.redirectView&&(y.data.redirectView=void 0),setTimeout(()=>{if(a){eR.setAccountProp("farcasterUrl",void 0,eR.state.activeChain);let e=D.getAuthConnector();e?.provider?.reload();let t=(0,r.snapshot)(g.OptionsController.state);e?.provider?.syncDappData?.({metadata:t.metadata,sdkVersion:t.sdkVersion,projectId:t.projectId,sdkType:t.sdkType})}},100)},goBackToIndex(e){if(y.history.length>1){y.history=y.history.slice(0,e+1);let[t]=y.history.slice(-1);t&&(y.view=t)}},goBackOrCloseModal(){v.state.history.length>1?v.goBack():T.close()}});e.s(["ThemeController",()=>U],639403);let O=(0,r.proxy)({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),k={state:O,subscribe:e=>(0,r.subscribe)(O,()=>e(O)),setThemeMode(e){O.themeMode=e;try{let t=D.getAuthConnector();if(t){let a=k.getSnapshot().themeVariables;t.provider.syncTheme({themeMode:e,themeVariables:a,w3mThemeVariables:(0,E.getW3mThemeVariables)(a,e)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(e){O.themeVariables={...O.themeVariables,...e};try{let e=D.getAuthConnector();if(e){let t=k.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:t,w3mThemeVariables:(0,E.getW3mThemeVariables)(O.themeVariables,O.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot:()=>(0,r.snapshot)(O)},U=(0,m.withErrorBoundary)(k),b=Object.fromEntries(s.AVAILABLE_NAMESPACES.map(e=>[e,void 0])),P=Object.fromEntries(s.AVAILABLE_NAMESPACES.map(e=>[e,!0])),L=(0,r.proxy)({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:b,filterByNamespaceMap:P}),D=(0,m.withErrorBoundary)({state:L,subscribe:e=>(0,r.subscribe)(L,()=>{e(L)}),subscribeKey:(e,t)=>(0,n.subscribeKey)(L,e,t),initialize(e){e.forEach(e=>{let t=h.StorageUtil.getConnectedConnectorId(e);t&&D.setConnectorId(t,e)})},setActiveConnector(e){e&&(L.activeConnector=(0,r.ref)(e))},setConnectors(e){e.filter(e=>!L.allConnectors.some(t=>t.id===e.id&&D.getConnectorName(t.name)===D.getConnectorName(e.name)&&t.chain===e.chain)).forEach(e=>{"MULTI_CHAIN"!==e.type&&L.allConnectors.push((0,r.ref)(e))});let t=D.getEnabledNamespaces(),a=D.getEnabledConnectors(t);L.connectors=D.mergeMultiChainConnectors(a)},filterByNamespaces(e){Object.keys(L.filterByNamespaceMap).forEach(e=>{L.filterByNamespaceMap[e]=!1}),e.forEach(e=>{L.filterByNamespaceMap[e]=!0}),D.updateConnectorsForEnabledNamespaces()},filterByNamespace(e,t){L.filterByNamespaceMap[e]=t,D.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){let e=D.getEnabledNamespaces(),t=D.getEnabledConnectors(e),a=D.areAllNamespacesEnabled();L.connectors=D.mergeMultiChainConnectors(t),a?S.ApiController.clearFilterByNamespaces():S.ApiController.filterByNamespaces(e)},getEnabledNamespaces:()=>Object.entries(L.filterByNamespaceMap).filter(([e,t])=>t).map(([e])=>e),getEnabledConnectors:e=>L.allConnectors.filter(t=>e.includes(t.chain)),areAllNamespacesEnabled:()=>Object.values(L.filterByNamespaceMap).every(e=>e),mergeMultiChainConnectors(e){let t=D.generateConnectorMapByName(e),a=[];return t.forEach(e=>{let t=e[0],r=t?.id===o.ConstantsUtil.CONNECTOR_ID.AUTH;e.length>1&&t?a.push({name:t.name,imageUrl:t.imageUrl,imageId:t.imageId,connectors:[...e],type:r?"AUTH":"MULTI_CHAIN",chain:"eip155",id:t?.id||""}):t&&a.push(t)}),a},generateConnectorMapByName(e){let t=new Map;return e.forEach(e=>{let{name:a}=e,r=D.getConnectorName(a);if(!r)return;let n=t.get(r)||[];n.find(t=>t.chain===e.chain)||n.push(e),t.set(r,n)}),t},getConnectorName:e=>e&&({"Trust Wallet":"Trust"})[e]||e,getUniqueConnectorsByName(e){let t=[];return e.forEach(e=>{t.find(t=>t.chain===e.chain)||t.push(e)}),t},addConnector(e){if(e.id===o.ConstantsUtil.CONNECTOR_ID.AUTH){let t=(0,r.snapshot)(g.OptionsController.state),a=U.getSnapshot().themeMode,n=U.getSnapshot().themeVariables;e?.provider?.syncDappData?.({metadata:t.metadata,sdkVersion:t.sdkVersion,projectId:t.projectId,sdkType:t.sdkType}),e?.provider?.syncTheme({themeMode:a,themeVariables:n,w3mThemeVariables:(0,E.getW3mThemeVariables)(n,a)}),D.setConnectors([e])}else D.setConnectors([e])},getAuthConnector(e){let t=e||eR.state.activeChain,a=L.connectors.find(e=>e.id===o.ConstantsUtil.CONNECTOR_ID.AUTH);if(a)return a?.connectors?.length?a.connectors.find(e=>e.chain===t):a},getAnnouncedConnectorRdns:()=>L.connectors.filter(e=>"ANNOUNCED"===e.type).map(e=>e.info?.rdns),getConnectorById:e=>L.allConnectors.find(t=>t.id===e),getConnector({id:e,rdns:t,namespace:a}){let r=a||eR.state.activeChain;return L.allConnectors.filter(e=>e.chain===r).find(a=>a.explorerId===e||a.info?.rdns===t)},syncIfAuthConnector(e){if("AUTH"!==e.id)return;let t=(0,r.snapshot)(g.OptionsController.state),a=U.getSnapshot().themeMode,n=U.getSnapshot().themeVariables;e?.provider?.syncDappData?.({metadata:t.metadata,sdkVersion:t.sdkVersion,sdkType:t.sdkType,projectId:t.projectId}),e.provider.syncTheme({themeMode:a,themeVariables:n,w3mThemeVariables:(0,E.getW3mThemeVariables)(n,a)})},getConnectorsByNamespace(e){let t=L.allConnectors.filter(t=>t.chain===e);return D.mergeMultiChainConnectors(t)},canSwitchToSmartAccount:e=>eR.checkIfSmartAccountEnabled()&&W(e)===c.W3mFrameRpcConstants.ACCOUNT_TYPES.EOA,selectWalletConnector(e){let t=v.state.data?.redirectView,a=D.getConnector({id:e.id,rdns:e.rdns});u.MobileWalletUtil.handleMobileDeeplinkRedirect(a?.explorerId||e.id,eR.state.activeChain),a?v.push("ConnectingExternal",{connector:a,wallet:e,redirectView:t}):v.push("ConnectingWalletConnect",{wallet:e,redirectView:t})},getConnectors:e=>e?D.getConnectorsByNamespace(e):D.mergeMultiChainConnectors(L.allConnectors),setFilterByNamespace(e){L.filterByNamespace=e,L.connectors=D.getConnectors(e),S.ApiController.setFilterByNamespace(e)},setConnectorId(e,t){e&&(L.activeConnectorIds={...L.activeConnectorIds,[t]:e},h.StorageUtil.setConnectedConnectorId(t,e))},removeConnectorId(e){L.activeConnectorIds={...L.activeConnectorIds,[e]:void 0},h.StorageUtil.deleteConnectedConnectorId(e)},getConnectorId(e){if(e)return L.activeConnectorIds[e]},isConnected:e=>e?!!L.activeConnectorIds[e]:Object.values(L.activeConnectorIds).some(e=>!!e),resetConnectorIds(){L.activeConnectorIds={...b}}});var M=e.i(360334);let B={checkNamespaceConnectorId:(e,t)=>D.getConnectorId(e)===t,isSocialProvider:e=>M.ConstantsUtil.DEFAULT_REMOTE_FEATURES.socials.includes(e),connectWalletConnect:({walletConnect:e,connector:t,closeModalOnConnect:a=!0,redirectViewOnModalClose:r="Connect",onOpen:n,onConnect:o})=>new Promise((s,c)=>{if(e&&D.setActiveConnector(t),n?.(f.CoreHelperUtil.isMobile()&&e),r){let e=T.subscribeKey("open",t=>{t||(v.state.view!==r&&v.replace(r),e(),c(Error("Modal closed")))})}let l=eR.subscribeKey("activeCaipAddress",e=>{e&&(o?.(),a&&T.close(),l(),s(i.ParseUtil.parseCaipAddress(e)))})}),connectExternal:e=>new Promise((t,a)=>{let r=eR.subscribeKey("activeCaipAddress",e=>{e&&(T.close(),r(),t(i.ParseUtil.parseCaipAddress(e)))});G.connectExternal(e,e.chain).catch(()=>{r(),a(Error("Connection rejected"))})}),connectSocial({social:e,namespace:t,closeModalOnConnect:a=!0,onOpenFarcaster:r,onConnect:n}){let s,c=!1,l=null,d=t||eR.state.activeChain,p=eR.subscribeKey("activeCaipAddress",e=>{e&&(a&&T.close(),p())});return new Promise((t,a)=>{async function p(r){if(r.data?.resultUri)if(r.origin===o.ConstantsUtil.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",p,!1);try{let n=D.getAuthConnector(d);if(n&&!c){s&&s.close(),c=!0;let o=r.data.resultUri;_.EventsController.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:e}}),h.StorageUtil.setConnectedSocialProvider(e),await G.connectExternal({id:n.id,type:n.type,socialUri:o},n.chain);let l=eR.state.activeCaipAddress;if(!l)return void a(Error("Failed to connect"));t(i.ParseUtil.parseCaipAddress(l)),_.EventsController.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:e}})}}catch(t){_.EventsController.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:e,message:f.CoreHelperUtil.parseError(t)}}),a(Error("Failed to connect"))}}else _.EventsController.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:e,message:"Untrusted Origin"}})}!async function(){if(_.EventsController.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:e}}),"farcaster"===e){r?.();let t=T.subscribeKey("open",r=>{r||"farcaster"!==e||(a(Error("Popup closed")),n?.(),t())}),o=D.getAuthConnector();if(o){let e=eR.getAccountData(d);if(!e?.farcasterUrl)try{let{url:e}=await o.provider.getFarcasterUri();eR.setAccountProp("farcasterUrl",e,d)}catch{a(Error("Failed to connect to farcaster"))}}}else{let t=D.getAuthConnector();l=f.CoreHelperUtil.returnOpenHref(`${o.ConstantsUtil.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(t){let{uri:r}=await t.provider.getSocialRedirectUri({provider:e});if(l&&r){l.location.href=r,s=l;let e=setInterval(()=>{s?.closed&&!c&&(a(Error("Popup closed")),clearInterval(e))},1e3);window.addEventListener("message",p,!1)}else l?.close(),a(Error("Failed to initiate social connection"))}}catch{a(Error("Failed to initiate social connection")),l?.close()}}}()})},connectEmail:({closeModalOnConnect:e=!0,redirectViewOnModalClose:t="Connect",onOpen:a,onConnect:r})=>new Promise((n,o)=>{if(a?.(),t){let e=T.subscribeKey("open",a=>{a||(v.state.view!==t&&v.replace(t),e(),o(Error("Modal closed")))})}let s=eR.subscribeKey("activeCaipAddress",t=>{t&&(r?.(),e&&T.close(),s(),n(i.ParseUtil.parseCaipAddress(t)))})}),async updateEmail(){let e=h.StorageUtil.getConnectedConnectorId(eR.state.activeChain),t=D.getAuthConnector();if(!t)throw Error("No auth connector found");if(e!==o.ConstantsUtil.CONNECTOR_ID.AUTH)throw Error("Not connected to email or social");let a=t.provider.getEmail()??"";return await T.open({view:"UpdateEmailWallet",data:{email:a,redirectView:void 0}}),new Promise((e,r)=>{let n=setInterval(()=>{let r=t.provider.getEmail()??"";r!==a&&(T.close(),clearInterval(n),o(),e({email:r}))},1e3),o=T.subscribeKey("open",e=>{e||("Connect"!==v.state.view&&v.push("Connect"),clearInterval(n),o(),r(Error("Modal closed")))})})},canSwitchToSmartAccount:e=>eR.checkIfSmartAccountEnabled()&&W(e)===c.W3mFrameRpcConstants.ACCOUNT_TYPES.EOA};function F(){let e=eR.state.activeCaipNetwork?.chainNamespace||"eip155",t=eR.state.activeCaipNetwork?.id||1,a=M.ConstantsUtil.NATIVE_TOKEN_ADDRESS[e];return`${e}:${t}:${a}`}function W(e){return eR.getAccountData(e)?.preferredAccountType}function x(e){return e?eR.state.chains.get(e)?.networkState?.caipNetwork:eR.state.activeCaipNetwork}e.s(["ConnectionControllerUtil",()=>H],210087);let H={getConnectionStatus(e,t){let a=D.state.activeConnectorIds[t],r=G.getConnections(t);return a&&e.connectorId===a?"connected":r.some(t=>t.connectorId.toLowerCase()===e.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections:({connections:e,connectorId:t,addresses:a})=>e.map(e=>{if(t&&e.connectorId.toLowerCase()===t.toLowerCase()&&a){let t=e.accounts.filter(e=>!a.some(t=>t.toLowerCase()===e.address.toLowerCase()));return{...e,accounts:t}}return e}),excludeExistingConnections(e,t){let a=new Set(e);return t.filter(e=>!a.has(e.connectorId))},getConnectionsByConnectorId:(e,t)=>e.filter(e=>e.connectorId.toLowerCase()===t.toLowerCase()),getConnectionsData(e){let t=!!g.OptionsController.state.remoteFeatures?.multiWallet,a=D.state.activeConnectorIds[e],r=G.getConnections(e),n=(G.state.recentConnections.get(e)??[]).filter(e=>D.getConnectorById(e.connectorId)),o=H.excludeExistingConnections([...r.map(e=>e.connectorId),...a?[a]:[]],n);return t?{connections:r,recentConnections:o}:{connections:r.filter(e=>e.connectorId.toLowerCase()===a?.toLowerCase()),recentConnections:[]}}};var K=e.i(811424);let V=(0,r.proxy)({transactions:[],transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),j=(0,m.withErrorBoundary)({state:V,subscribe:e=>(0,r.subscribe)(V,()=>e(V)),setLastNetworkInView(e){V.lastNetworkInView=e},async fetchTransactions(e){if(!e)throw Error("Transactions can't be fetched without an accountAddress");V.loading=!0;try{let t=await C.BlockchainApiController.fetchTransactions({account:e,cursor:V.next,chainId:eR.state.activeCaipNetwork?.caipNetworkId}),a=j.filterSpamTransactions(t.data),r=j.filterByConnectedChain(a),n=[...V.transactions,...r];V.loading=!1,V.transactions=n,V.transactionsByYear=j.groupTransactionsByYearAndMonth(V.transactionsByYear,r),V.empty=0===n.length,V.next=t.next?t.next:void 0}catch(a){let t=eR.state.activeChain;_.EventsController.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:e,projectId:g.OptionsController.state.projectId,cursor:V.next,isSmartAccount:W(t)===c.W3mFrameRpcConstants.ACCOUNT_TYPES.SMART_ACCOUNT}}),K.SnackController.showError("Failed to fetch transactions"),V.loading=!1,V.empty=!0,V.next=void 0}},groupTransactionsByYearAndMonth:(e={},t=[])=>(t.forEach(t=>{let a=new Date(t.metadata.minedAt).getFullYear(),r=new Date(t.metadata.minedAt).getMonth(),n=e[a]??{},o=(n[r]??[]).filter(e=>e.id!==t.id);e[a]={...n,[r]:[...o,t].sort((e,t)=>new Date(t.metadata.minedAt).getTime()-new Date(e.metadata.minedAt).getTime())}}),e),filterSpamTransactions:e=>e.filter(e=>!e.transfers.every(e=>e.nft_info?.flags.is_spam===!0)),filterByConnectedChain(e){let t=eR.state.activeCaipNetwork?.caipNetworkId;return e.filter(e=>e.metadata.chain===t)},clearCursor(){V.next=void 0},resetTransactions(){V.transactions=[],V.transactionsByYear={},V.lastNetworkInView=void 0,V.loading=!1,V.empty=!1,V.next=void 0}},"API_ERROR"),$=(0,r.proxy)({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"}),G=(0,m.withErrorBoundary)({state:$,subscribe:e=>(0,r.subscribe)($,()=>e($)),subscribeKey:(e,t)=>(0,n.subscribeKey)($,e,t),_getClient:()=>$._client,setClient(e){$._client=(0,r.ref)(e)},initialize(e){let t=e.filter(e=>!!e.namespace).map(e=>e.namespace);G.syncStorageConnections(t)},syncStorageConnections(e){let t=h.StorageUtil.getConnections();for(let a of e??Array.from(eR.state.chains.keys())){let e=t[a]??[],r=new Map($.recentConnections);r.set(a,e),$.recentConnections=r}},getConnections:e=>e?$.connections.get(e)??[]:[],hasAnyConnection:e=>Array.from(G.state.connections.values()).flatMap(e=>e).some(({connectorId:t})=>t===e),async connectWalletConnect({cache:e="auto"}={}){let a=f.CoreHelperUtil.isTelegram()||f.CoreHelperUtil.isSafari()&&f.CoreHelperUtil.isIos();if("always"===e||"auto"===e&&a){if(t){await t,t=void 0;return}if(!f.CoreHelperUtil.isPairingExpired($?.wcPairingExpiry)){let e=$.wcUri;$.wcUri=e;return}t=G._getClient()?.connectWalletConnect?.().catch(()=>void 0),G.state.status="connecting",await t,t=void 0,$.wcPairingExpiry=void 0,G.state.status="connected"}else await G._getClient()?.connectWalletConnect?.()},async connectExternal(e,t,a=!0){let r=await G._getClient()?.connectExternal?.(e);return a&&eR.setActiveNamespace(t),r},async reconnectExternal(e){await G._getClient()?.reconnectExternal?.(e);let t=e.chain||eR.state.activeChain;t&&D.setConnectorId(e.id,t)},async setPreferredAccountType(e,t){if(!t)return;T.setLoading(!0,eR.state.activeChain);let a=D.getAuthConnector();a&&(eR.setAccountProp("preferredAccountType",e,t),await a.provider.setPreferredAccount(e),h.StorageUtil.setPreferredAccountTypes(Object.entries(eR.state.chains).reduce((e,[t,a])=>{let r=W(t);return void 0!==r&&(e[t]=r),e},{})),await G.reconnectExternal(a),T.setLoading(!1,eR.state.activeChain),_.EventsController.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:e,network:eR.state.activeCaipNetwork?.caipNetworkId||""}}))},signMessage:async e=>G._getClient()?.signMessage(e),parseUnits:(e,t)=>G._getClient()?.parseUnits(e,t),formatUnits:(e,t)=>G._getClient()?.formatUnits(e,t),updateBalance:e=>G._getClient()?.updateBalance(e),sendTransaction:async e=>G._getClient()?.sendTransaction(e),getCapabilities:async e=>G._getClient()?.getCapabilities(e),grantPermissions:async e=>G._getClient()?.grantPermissions(e),walletGetAssets:async e=>G._getClient()?.walletGetAssets(e)??{},estimateGas:async e=>G._getClient()?.estimateGas(e),writeContract:async e=>G._getClient()?.writeContract(e),getEnsAddress:async e=>G._getClient()?.getEnsAddress(e),getEnsAvatar:async e=>G._getClient()?.getEnsAvatar(e),checkInstalled:e=>G._getClient()?.checkInstalled?.(e)||!1,resetWcConnection(){$.wcUri=void 0,$.wcPairingExpiry=void 0,$.wcLinking=void 0,$.recentWallet=void 0,$.status="disconnected",j.resetTransactions(),h.StorageUtil.deleteWalletConnectDeepLink(),h.StorageUtil.deleteRecentWallet()},resetUri(){$.wcUri=void 0,$.wcPairingExpiry=void 0,t=void 0},finalizeWcConnection(e){let{wcLinking:t,recentWallet:a}=G.state;t&&h.StorageUtil.setWalletConnectDeepLink(t),a&&h.StorageUtil.setAppKitRecent(a),e&&_.EventsController.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:e,properties:{method:t?"mobile":"qrcode",name:v.state.data?.wallet?.name||"Unknown",view:v.state.view,walletRank:a?.order}})},setWcBasic(e){$.wcBasic=e},setUri(e){$.wcUri=e,$.wcPairingExpiry=f.CoreHelperUtil.getPairingExpiry()},setWcLinking(e){$.wcLinking=e},setWcError(e){$.wcError=e,$.buffering=!1},setRecentWallet(e){$.recentWallet=e},setBuffering(e){$.buffering=e},setStatus(e){$.status=e},setIsSwitchingConnection(e){$.isSwitchingConnection=e},async disconnect({id:e,namespace:t,initialDisconnect:a}={}){try{await G._getClient()?.disconnect({id:e,chainNamespace:t,initialDisconnect:a})}catch(e){throw new m.AppKitError("Failed to disconnect","INTERNAL_SDK_ERROR",e)}},async disconnectConnector({id:e,namespace:t}){try{await G._getClient()?.disconnectConnector({id:e,namespace:t})}catch(e){throw new m.AppKitError("Failed to disconnect connector","INTERNAL_SDK_ERROR",e)}},setConnections(e,t){let a=new Map($.connections);a.set(t,e),$.connections=a},async handleAuthAccountSwitch({address:e,namespace:t}){let a=eR.getAccountData(t),r=a?.user?.accounts?.find(e=>"smartAccount"===e.type),n=r&&r.address.toLowerCase()===e.toLowerCase()&&B.canSwitchToSmartAccount(t)?"smartAccount":"eoa";await G.setPreferredAccountType(n,t)},async handleActiveConnection({connection:e,namespace:t,address:a}){let r=D.getConnectorById(e.connectorId),n=e.connectorId===o.ConstantsUtil.CONNECTOR_ID.AUTH;if(!r)throw Error(`No connector found for connection: ${e.connectorId}`);if(n)a&&await G.handleAuthAccountSwitch({address:a,namespace:t});else{let e=await G.connectExternal({id:r.id,type:r.type,provider:r.provider,address:a,chain:t},t);return e?.address}return a},async handleDisconnectedConnection({connection:e,namespace:t,address:a,closeModalOnConnect:r}){let n,s=D.getConnectorById(e.connectorId),i=e.auth?.name?.toLowerCase(),c=e.connectorId===o.ConstantsUtil.CONNECTOR_ID.AUTH,l=e.connectorId===o.ConstantsUtil.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw Error(`No connector found for connection: ${e.connectorId}`);if(c)if(i&&B.isSocialProvider(i)){let{address:e}=await B.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){T.open({view:"ConnectingFarcaster"})},onConnect(){v.replace("ProfileWallets")}});n=e}else{let{address:e}=await B.connectEmail({closeModalOnConnect:r,onOpen(){T.open({view:"EmailLogin"})},onConnect(){v.replace("ProfileWallets")}});n=e}else if(l){let{address:e}=await B.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(e){let t=e?"AllWallets":"ConnectingWalletConnect";T.state.open?v.push(t):T.open({view:t})},onConnect(){v.replace("ProfileWallets")}});n=e}else{let e=await G.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:t},t);e&&(n=e.address)}return c&&a&&await G.handleAuthAccountSwitch({address:a,namespace:t}),n},async switchConnection({connection:e,address:t,namespace:a,closeModalOnConnect:r,onChange:n}){let o,s=eR.getAccountData(a)?.caipAddress;if(s){let{address:e}=i.ParseUtil.parseCaipAddress(s);o=e}let c=H.getConnectionStatus(e,a);switch(c){case"connected":case"active":{let r=await G.handleActiveConnection({connection:e,namespace:a,address:t});if(o&&r){let e=r.toLowerCase()!==o.toLowerCase();n?.({address:r,namespace:a,hasSwitchedAccount:e,hasSwitchedWallet:"active"===c})}break}case"disconnected":{let o=await G.handleDisconnectedConnection({connection:e,namespace:a,address:t,closeModalOnConnect:r});o&&n?.({address:o,namespace:a,hasSwitchedAccount:!0,hasSwitchedWallet:!0});break}default:throw Error(`Invalid connection status: ${c}`)}}}),Y={createBalance(e,t){let a={name:e.metadata.name||"",symbol:e.metadata.symbol||"",decimals:e.metadata.decimals||0,value:e.metadata.value||0,price:e.metadata.price||0,iconUrl:e.metadata.iconUrl||""};return{name:a.name,symbol:a.symbol,chainId:t,address:"native"===e.address?void 0:this.convertAddressToCAIP10Address(e.address,t),value:a.value,price:a.price,quantity:{decimals:a.decimals.toString(),numeric:this.convertHexToBalance({hex:e.balance,decimals:a.decimals})},iconUrl:a.iconUrl}},convertHexToBalance:({hex:e,decimals:t})=>(0,p.formatUnits)(BigInt(e),t),convertAddressToCAIP10Address:(e,t)=>`${t}:${e}`,createCAIP2ChainId:(e,t)=>`${t}:${parseInt(e,16)}`,getChainIdHexFromCAIP2ChainId(e){let t=e.split(":");if(t.length<2||!t[1])return"0x0";let a=parseInt(t[1],10);return isNaN(a)?"0x0":`0x${a.toString(16)}`},isWalletGetAssetsResponse(e){return"object"==typeof e&&null!==e&&Object.values(e).every(e=>Array.isArray(e)&&e.every(e=>this.isValidAsset(e)))},isValidAsset:e=>"object"==typeof e&&null!==e&&"string"==typeof e.address&&"string"==typeof e.balance&&("ERC20"===e.type||"NATIVE"===e.type)&&"object"==typeof e.metadata&&null!==e.metadata&&"string"==typeof e.metadata.name&&"string"==typeof e.metadata.symbol&&"number"==typeof e.metadata.decimals&&"number"==typeof e.metadata.price&&"string"==typeof e.metadata.iconUrl};async function q(){if(!a){let{createPublicClient:t,http:r,defineChain:n}=await e.A(933619);a={createPublicClient:t,http:r,defineChain:n}}return a}let J={getBlockchainApiRpcUrl(e,t){let a=new URL("https://rpc.walletconnect.org/v1/");return a.searchParams.set("chainId",e),a.searchParams.set("projectId",t),a.toString()},async getViemChain(e){let{defineChain:t}=await q(),{chainId:a}=i.ParseUtil.parseCaipNetworkId(e.caipNetworkId);return t({...e,id:Number(a)})},async createViemPublicClient(e){let{createPublicClient:t,http:a}=await q(),r=g.OptionsController.state.projectId,n=await J.getViemChain(e);if(!n)throw Error(`Chain ${e.caipNetworkId} not found in viem/chains`);return t({chain:n,transport:a(J.getBlockchainApiRpcUrl(e.caipNetworkId,r))})}},X={async getMyTokensWithBalance(e){let t=eR.getAccountData()?.address,a=eR.state.activeCaipNetwork,r=D.getConnectorId("eip155")===o.ConstantsUtil.CONNECTOR_ID.AUTH;if(!t||!a)return[];let n=`${a.caipNetworkId}:${t}`,s=h.StorageUtil.getBalanceCacheForCaipAddress(n);if(s)return s.balances;if(a.chainNamespace===o.ConstantsUtil.CHAIN.EVM&&r){let e=await this.getEIP155Balances(t,a);if(e)return this.filterLowQualityTokens(e)}let i=await C.BlockchainApiController.getBalance(t,a.caipNetworkId,e);return this.filterLowQualityTokens(i.balances)},async getEIP155Balances(e,t){try{let a=Y.getChainIdHexFromCAIP2ChainId(t.caipNetworkId),r=await G.getCapabilities(e);if(!r?.[a]?.assetDiscovery?.supported)return null;let n=await G.walletGetAssets({account:e,chainFilter:[a]});if(!Y.isWalletGetAssetsResponse(n))return null;let o=(n[a]||[]).map(e=>Y.createBalance(e,t.caipNetworkId));return h.StorageUtil.updateBalanceCache({caipAddress:`${t.caipNetworkId}:${e}`,balance:{balances:o},timestamp:Date.now()}),o}catch(e){return null}},filterLowQualityTokens:e=>e.filter(e=>"0"!==e.quantity.decimals),async fetchERC20Balance({caipAddress:e,assetAddress:t,caipNetwork:a}){let r=await J.createViemPublicClient(a),{address:n}=i.ParseUtil.parseCaipAddress(e),[{result:o},{result:s},{result:c},{result:l}]=await r.multicall({contracts:[{address:t,functionName:"name",args:[],abi:d.erc20Abi},{address:t,functionName:"symbol",args:[],abi:d.erc20Abi},{address:t,functionName:"balanceOf",args:[n],abi:d.erc20Abi},{address:t,functionName:"decimals",args:[],abi:d.erc20Abi}]});return{name:o,symbol:s,decimals:l,balance:c&&l?(0,p.formatUnits)(c,l):"0"}}},Q={adapters:{}},z={state:Q,initialize(e){Q.adapters={...e}},get:e=>Q.adapters[e]};e.s(["AdapterController",0,z],465166);let Z={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0,sui:void 0,stacks:void 0},ee=(0,r.proxy)({providers:{...Z},providerIds:{...Z}}),et={state:ee,subscribeKey:(e,t)=>(0,n.subscribeKey)(ee,e,t),subscribe:e=>(0,r.subscribe)(ee,()=>{e(ee)}),subscribeProviders:e=>(0,r.subscribe)(ee.providers,()=>e(ee.providers)),setProvider(e,t){e&&t&&(ee.providers[e]=(0,r.ref)(t))},getProvider(e){if(e)return ee.providers[e]},setProviderId(e,t){t&&(ee.providerIds[e]=t)},getProviderId(e){if(e)return ee.providerIds[e]},reset(){ee.providers={...Z},ee.providerIds={...Z}},resetChain(e){ee.providers[e]=void 0,ee.providerIds[e]=void 0}};e.s(["ProviderController",0,et],462579),e.s(["SendController",()=>e_],194712);let ea={RPC_ERROR_CODE:{USER_REJECTED_REQUEST:4001,USER_REJECTED_METHODS:5002,USER_REJECTED:5e3},PROVIDER_RPC_ERROR_NAME:{PROVIDER_RPC:"ProviderRpcError",USER_REJECTED_REQUEST:"UserRejectedRequestError"},isRpcProviderError(e){try{if("object"==typeof e&&null!==e){let t="string"==typeof e.message,a="number"==typeof e.code;return t&&a}return!1}catch{return!1}},isUserRejectedMessage:e=>e.toLowerCase().includes("user rejected")||e.toLowerCase().includes("user cancelled")||e.toLowerCase().includes("user canceled"),isUserRejectedRequestError(e){if(ea.isRpcProviderError(e)){let t=e.code===ea.RPC_ERROR_CODE.USER_REJECTED_REQUEST,a=e.code===ea.RPC_ERROR_CODE.USER_REJECTED_METHODS;return t||a||ea.isUserRejectedMessage(e.message)}return e instanceof Error&&ea.isUserRejectedMessage(e.message)}};class er extends Error{constructor(e,t){super(t.message,{cause:e}),this.name=ea.PROVIDER_RPC_ERROR_NAME.PROVIDER_RPC,this.code=t.code}}class en extends er{constructor(e){super(e,{code:ea.RPC_ERROR_CODE.USER_REJECTED_REQUEST,message:"User rejected the request"}),this.name=ea.PROVIDER_RPC_ERROR_NAME.USER_REJECTED_REQUEST}}e.s(["ErrorUtil",0,ea,"UserRejectedRequestError",()=>en],683075);var eo="[big.js] ",es=eo+"Invalid ",ei=es+"decimal places",ec=es+"rounding mode",el=eo+"Division by zero",ed={},ep=void 0,eC=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function eE(e,t,a,r){var n=e.c;if(a===ep&&(a=e.constructor.RM),0!==a&&1!==a&&2!==a&&3!==a)throw Error(ec);if(t<1)r=3===a&&(r||!!n[0])||0===t&&(1===a&&n[0]>=5||2===a&&(n[0]>5||5===n[0]&&(r||n[1]!==ep))),n.length=1,r?(e.e=e.e-t+1,n[0]=1):n[0]=e.e=0;else if(t<n.length){if(r=1===a&&n[t]>=5||2===a&&(n[t]>5||5===n[t]&&(r||n[t+1]!==ep||1&n[t-1]))||3===a&&(r||!!n[0]),n.length=t,r){for(;++n[--t]>9;)if(n[t]=0,0===t){++e.e,n.unshift(1);break}}for(t=n.length;!n[--t];)n.pop()}return e}function eu(e,t,a){var r=e.e,n=e.c.join(""),o=n.length;if(t)n=n.charAt(0)+(o>1?"."+n.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)n="0"+n;n="0."+n}else if(r>0)if(++r>o)for(r-=o;r--;)n+="0";else r<o&&(n=n.slice(0,r)+"."+n.slice(r));else o>1&&(n=n.charAt(0)+"."+n.slice(1));return e.s<0&&a?"-"+n:n}ed.abs=function(){var e=new this.constructor(this);return e.s=1,e},ed.cmp=function(e){var t,a=this.c,r=(e=new this.constructor(e)).c,n=this.s,o=e.s,s=this.e,i=e.e;if(!a[0]||!r[0])return a[0]?n:r[0]?-o:0;if(n!=o)return n;if(t=n<0,s!=i)return s>i^t?1:-1;for(n=-1,o=(s=a.length)<(i=r.length)?s:i;++n<o;)if(a[n]!=r[n])return a[n]>r[n]^t?1:-1;return s==i?0:s>i^t?1:-1},ed.div=function(e){var t=this.constructor,a=this.c,r=(e=new t(e)).c,n=this.s==e.s?1:-1,o=t.DP;if(o!==~~o||o<0||o>1e6)throw Error(ei);if(!r[0])throw Error(el);if(!a[0])return e.s=n,e.c=[e.e=0],e;var s,i,c,l,d,p=r.slice(),C=s=r.length,E=a.length,u=a.slice(0,s),h=u.length,m=e,S=m.c=[],g=0,f=o+(m.e=this.e-e.e)+1;for(m.s=n,n=f<0?0:f,p.unshift(0);h++<s;)u.push(0);do{for(c=0;c<10;c++){if(s!=(h=u.length))l=s>h?1:-1;else for(d=-1,l=0;++d<s;)if(r[d]!=u[d]){l=r[d]>u[d]?1:-1;break}if(l<0){for(i=h==s?r:p;h;){if(u[--h]<i[h]){for(d=h;d&&!u[--d];)u[d]=9;--u[d],u[h]+=10}u[h]-=i[h]}for(;!u[0];)u.shift()}else break}S[g++]=l?c:++c,u[0]&&l?u[h]=a[C]||0:u=[a[C]]}while((C++<E||u[0]!==ep)&&n--)return!S[0]&&1!=g&&(S.shift(),m.e--,f--),g>f&&eE(m,f,t.RM,u[0]!==ep),m},ed.eq=function(e){return 0===this.cmp(e)},ed.gt=function(e){return this.cmp(e)>0},ed.gte=function(e){return this.cmp(e)>-1},ed.lt=function(e){return 0>this.cmp(e)},ed.lte=function(e){return 1>this.cmp(e)},ed.minus=ed.sub=function(e){var t,a,r,n,o=this.constructor,s=this.s,i=(e=new o(e)).s;if(s!=i)return e.s=-i,this.plus(e);var c=this.c.slice(),l=this.e,d=e.c,p=e.e;if(!c[0]||!d[0])return d[0]?e.s=-i:c[0]?e=new o(this):e.s=1,e;if(s=l-p){for((n=s<0)?(s=-s,r=c):(p=l,r=d),r.reverse(),i=s;i--;)r.push(0);r.reverse()}else for(a=((n=c.length<d.length)?c:d).length,s=i=0;i<a;i++)if(c[i]!=d[i]){n=c[i]<d[i];break}if(n&&(r=c,c=d,d=r,e.s=-e.s),(i=(a=d.length)-(t=c.length))>0)for(;i--;)c[t++]=0;for(i=t;a>s;){if(c[--a]<d[a]){for(t=a;t&&!c[--t];)c[t]=9;--c[t],c[a]+=10}c[a]-=d[a]}for(;0===c[--i];)c.pop();for(;0===c[0];)c.shift(),--p;return c[0]||(e.s=1,c=[p=0]),e.c=c,e.e=p,e},ed.mod=function(e){var t,a=this,r=a.constructor,n=a.s,o=(e=new r(e)).s;if(!e.c[0])throw Error(el);return(a.s=e.s=1,t=1==e.cmp(a),a.s=n,e.s=o,t)?new r(a):(n=r.DP,o=r.RM,r.DP=r.RM=0,a=a.div(e),r.DP=n,r.RM=o,this.minus(a.times(e)))},ed.neg=function(){var e=new this.constructor(this);return e.s=-e.s,e},ed.plus=ed.add=function(e){var t,a,r,n=this.constructor;if(e=new n(e),this.s!=e.s)return e.s=-e.s,this.minus(e);var o=this.e,s=this.c,i=e.e,c=e.c;if(!s[0]||!c[0])return c[0]||(s[0]?e=new n(this):e.s=this.s),e;if(s=s.slice(),t=o-i){for(t>0?(i=o,r=c):(t=-t,r=s),r.reverse();t--;)r.push(0);r.reverse()}for(s.length-c.length<0&&(r=c,c=s,s=r),t=c.length,a=0;t;s[t]%=10)a=(s[--t]=s[t]+c[t]+a)/10|0;for(a&&(s.unshift(a),++i),t=s.length;0===s[--t];)s.pop();return e.c=s,e.e=i,e},ed.pow=function(e){var t=this,a=new t.constructor("1"),r=a,n=e<0;if(e!==~~e||e<-1e6||e>1e6)throw Error(es+"exponent");for(n&&(e=-e);1&e&&(r=r.times(t)),e>>=1;)t=t.times(t);return n?a.div(r):r},ed.prec=function(e,t){if(e!==~~e||e<1||e>1e6)throw Error(es+"precision");return eE(new this.constructor(this),e,t)},ed.round=function(e,t){if(e===ep)e=0;else if(e!==~~e||e<-1e6||e>1e6)throw Error(ei);return eE(new this.constructor(this),e+this.e+1,t)},ed.sqrt=function(){var e,t,a,r=this.constructor,n=this.s,o=this.e,s=new r("0.5");if(!this.c[0])return new r(this);if(n<0)throw Error(eo+"No square root");0===(n=Math.sqrt(+eu(this,!0,!0)))||n===1/0?((t=this.c.join("")).length+o&1||(t+="0"),o=((o+1)/2|0)-(o<0||1&o),e=new r(((n=Math.sqrt(t))==1/0?"5e":(n=n.toExponential()).slice(0,n.indexOf("e")+1))+o)):e=new r(n+""),o=e.e+(r.DP+=4);do a=e,e=s.times(a.plus(this.div(a)));while(a.c.slice(0,o).join("")!==e.c.slice(0,o).join(""))return eE(e,(r.DP-=4)+e.e+1,r.RM)},ed.times=ed.mul=function(e){var t,a=this.constructor,r=this.c,n=(e=new a(e)).c,o=r.length,s=n.length,i=this.e,c=e.e;if(e.s=this.s==e.s?1:-1,!r[0]||!n[0])return e.c=[e.e=0],e;for(e.e=i+c,o<s&&(t=r,r=n,n=t,c=o,o=s,s=c),t=Array(c=o+s);c--;)t[c]=0;for(i=s;i--;){for(s=0,c=o+i;c>i;)s=t[c]+n[i]*r[c-i-1]+s,t[c--]=s%10,s=s/10|0;t[c]=s}for(s?++e.e:t.shift(),i=t.length;!t[--i];)t.pop();return e.c=t,e},ed.toExponential=function(e,t){var a=this,r=a.c[0];if(e!==ep){if(e!==~~e||e<0||e>1e6)throw Error(ei);for(a=eE(new a.constructor(a),++e,t);a.c.length<e;)a.c.push(0)}return eu(a,!0,!!r)},ed.toFixed=function(e,t){var a=this,r=a.c[0];if(e!==ep){if(e!==~~e||e<0||e>1e6)throw Error(ei);for(a=eE(new a.constructor(a),e+a.e+1,t),e=e+a.e+1;a.c.length<e;)a.c.push(0)}return eu(a,!1,!!r)},ed[Symbol.for("nodejs.util.inspect.custom")]=ed.toJSON=ed.toString=function(){var e=this.constructor;return eu(this,this.e<=e.NE||this.e>=e.PE,!!this.c[0])},ed.toNumber=function(){var e=+eu(this,!0,!0);if(!0===this.constructor.strict&&!this.eq(e.toString()))throw Error(eo+"Imprecise conversion");return e},ed.toPrecision=function(e,t){var a=this,r=a.constructor,n=a.c[0];if(e!==ep){if(e!==~~e||e<1||e>1e6)throw Error(es+"precision");for(a=eE(new r(a),e,t);a.c.length<e;)a.c.push(0)}return eu(a,e<=a.e||a.e<=r.NE||a.e>=r.PE,!!n)},ed.valueOf=function(){var e=this.constructor;if(!0===e.strict)throw Error(eo+"valueOf disallowed");return eu(this,this.e<=e.NE||this.e>=e.PE,!0)};var eh=function e(){function t(a){if(!(this instanceof t))return a===ep?e():new t(a);if(a instanceof t)this.s=a.s,this.e=a.e,this.c=a.c.slice();else{if("string"!=typeof a){if(!0===t.strict&&"bigint"!=typeof a)throw TypeError(es+"value");a=0===a&&1/a<0?"-0":String(a)}!function(e,t){var a,r,n;if(!eC.test(t))throw Error(es+"number");for(e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(a=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(a<0&&(a=r),a+=+t.slice(r+1),t=t.substring(0,r)):a<0&&(a=t.length),n=t.length,r=0;r<n&&"0"==t.charAt(r);)++r;if(r==n)e.c=[e.e=0];else{for(;n>0&&"0"==t.charAt(--n););for(e.e=a-r-1,e.c=[],a=0;r<=n;)e.c[a++]=+t.charAt(r++)}}(this,a)}this.constructor=t}return t.prototype=ed,t.DP=20,t.RM=1,t.NE=-7,t.PE=21,t.strict=!1,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}();let em={bigNumber:e=>new eh(e?e:0),multiply(e,t){if(void 0===e||void 0===t)return new eh(0);let a=new eh(e),r=new eh(t);return a.times(r)},toFixed:(e,t=2)=>void 0===e||""===e?new eh(0).toFixed(t):new eh(e).toFixed(t),formatNumberToLocalString:(e,t=2)=>void 0===e||""===e?"0.00":"number"==typeof e?e.toLocaleString("en-US",{maximumFractionDigits:t,minimumFractionDigits:t,roundingMode:"floor"}):parseFloat(e).toLocaleString("en-US",{maximumFractionDigits:t,minimumFractionDigits:t,roundingMode:"floor"}),parseLocalStringToNumber:e=>void 0===e||""===e?0:new eh(e.replace(/,/gu,"")).toNumber()};e.s(["NumberUtil",0,em],675457);let eS=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],eg=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}];e.s(["SwapApiUtil",()=>ef],664717);let ef={async getTokenList(e){let t=await C.BlockchainApiController.fetchSwapTokens({chainId:e});return t?.tokens?.map(e=>({...e,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0}))||[]},async fetchGasPrice(){let e=eR.state.activeCaipNetwork;if(!e)return null;try{if("solana"!==e.chainNamespace)return await C.BlockchainApiController.fetchGasPrice({chainId:e.caipNetworkId});{let e=(await G?.estimateGas({chainNamespace:"solana"}))?.toString();return{standard:e,fast:e,instant:e}}}catch{return null}},async fetchSwapAllowance({tokenAddress:e,userAddress:t,sourceTokenAmount:a,sourceTokenDecimals:r}){let n=await C.BlockchainApiController.fetchSwapAllowance({tokenAddress:e,userAddress:t});if(n?.allowance&&a&&r){let e=G.parseUnits(a,r)||0;return BigInt(n.allowance)>=e}return!1},async getMyTokensWithBalance(e){let t=await X.getMyTokensWithBalance(e);return eR.setAccountProp("tokenBalance",t,eR.state.activeChain),this.mapBalancesToSwapTokens(t)},mapBalancesToSwapTokens:e=>e?.map(e=>({...e,address:e?.address?e.address:F(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1}))||[],async handleSwapError(e){try{let t=e?.cause;if(!t?.json)return;let a=await t.json(),r=a?.reasons?.[0]?.description;if(r?.includes("insufficient liquidity"))return"Insufficient liquidity";return}catch{return}}},eA=(0,r.proxy)({tokenBalances:[],loading:!1}),e_=(0,m.withErrorBoundary)({state:eA,subscribe:e=>(0,r.subscribe)(eA,()=>e(eA)),subscribeKey:(e,t)=>(0,n.subscribeKey)(eA,e,t),setToken(e){e&&(eA.token=(0,r.ref)(e))},setTokenAmount(e){eA.sendTokenAmount=e},setReceiverAddress(e){eA.receiverAddress=e},setReceiverProfileImageUrl(e){eA.receiverProfileImageUrl=e},setReceiverProfileName(e){eA.receiverProfileName=e},setNetworkBalanceInUsd(e){eA.networkBalanceInUSD=e},setLoading(e){eA.loading=e},getSdkEventProperties:e=>({message:f.CoreHelperUtil.parseError(e),isSmartAccount:W(eR.state.activeChain)===c.W3mFrameRpcConstants.ACCOUNT_TYPES.SMART_ACCOUNT,token:eA.token?.symbol||"",amount:eA.sendTokenAmount??0,network:eR.state.activeCaipNetwork?.caipNetworkId||""}),async sendToken(){try{switch(e_.setLoading(!0),eR.state.activeCaipNetwork?.chainNamespace){case"eip155":await e_.sendEvmToken();return;case"solana":await e_.sendSolanaToken();return;default:throw Error("Unsupported chain")}}catch(e){if(ea.isUserRejectedRequestError(e))throw new en(e);throw e}finally{e_.setLoading(!1)}},async sendEvmToken(){let e=eR.state.activeChain;if(!e)throw Error("SendController:sendEvmToken - activeChainNamespace is required");let t=W(e);if(!e_.state.sendTokenAmount||!e_.state.receiverAddress)throw Error("An amount and receiver address are required");if(!e_.state.token)throw Error("A token is required");if(e_.state.token?.address){_.EventsController.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:t===c.W3mFrameRpcConstants.ACCOUNT_TYPES.SMART_ACCOUNT,token:e_.state.token.address,amount:e_.state.sendTokenAmount,network:eR.state.activeCaipNetwork?.caipNetworkId||""}});let{hash:e}=await e_.sendERC20Token({receiverAddress:e_.state.receiverAddress,tokenAddress:e_.state.token.address,sendTokenAmount:e_.state.sendTokenAmount,decimals:e_.state.token.quantity.decimals});e&&(eA.hash=e)}else{_.EventsController.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:t===c.W3mFrameRpcConstants.ACCOUNT_TYPES.SMART_ACCOUNT,token:e_.state.token.symbol||"",amount:e_.state.sendTokenAmount,network:eR.state.activeCaipNetwork?.caipNetworkId||""}});let{hash:e}=await e_.sendNativeToken({receiverAddress:e_.state.receiverAddress,sendTokenAmount:e_.state.sendTokenAmount,decimals:e_.state.token.quantity.decimals});e&&(eA.hash=e)}},async fetchTokenBalance(e){eA.loading=!0;let t=eR.state.activeChain,a=eR.state.activeCaipNetwork?.caipNetworkId,r=eR.state.activeCaipNetwork?.chainNamespace,n=eR.getAccountData(t)?.caipAddress??eR.state.activeCaipAddress,o=n?f.CoreHelperUtil.getPlainAddress(n):void 0;if(eA.lastRetry&&!f.CoreHelperUtil.isAllowedRetry(eA.lastRetry,30*M.ConstantsUtil.ONE_SEC_MS))return eA.loading=!1,[];try{if(o&&a&&r){let e=await X.getMyTokensWithBalance();return eA.tokenBalances=e,eA.lastRetry=void 0,e}}catch(t){eA.lastRetry=Date.now(),e?.(t),K.SnackController.showError("Token Balance Unavailable")}finally{eA.loading=!1}return[]},fetchNetworkBalance(){if(0===eA.tokenBalances.length)return;let e=ef.mapBalancesToSwapTokens(eA.tokenBalances);if(!e)return;let t=e.find(e=>e.address===F());t&&(eA.networkBalanceInUSD=t?em.multiply(t.quantity.numeric,t.price).toString():"0")},async sendNativeToken(e){v.pushTransactionStack({});let t=e.receiverAddress,a=eR.getAccountData()?.address,r=G.parseUnits(e.sendTokenAmount.toString(),Number(e.decimals)),n=await G.sendTransaction({chainNamespace:o.ConstantsUtil.CHAIN.EVM,to:t,address:a,data:"0x",value:r??BigInt(0)});return _.EventsController.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:W("eip155")===c.W3mFrameRpcConstants.ACCOUNT_TYPES.SMART_ACCOUNT,token:e_.state.token?.symbol||"",amount:e.sendTokenAmount,network:eR.state.activeCaipNetwork?.caipNetworkId||"",hash:n||""}}),G._getClient()?.updateBalance("eip155"),e_.resetSend(),{hash:n}},async sendERC20Token(e){v.pushTransactionStack({onSuccess(){v.replace("Account")}});let t=G.parseUnits(e.sendTokenAmount.toString(),Number(e.decimals)),a=eR.getAccountData()?.address;if(a&&e.sendTokenAmount&&e.receiverAddress&&e.tokenAddress){let r,n=f.CoreHelperUtil.getPlainAddress(e.tokenAddress);if(!n)throw Error("SendController:sendERC20Token - tokenAddress is required");let s=await G.writeContract({fromAddress:a,tokenAddress:n,args:[e.receiverAddress,t??BigInt(0)],method:"transfer",abi:(r=n,o.ConstantsUtil.USDT_CONTRACT_ADDRESSES.includes(r)?eg:eS),chainNamespace:o.ConstantsUtil.CHAIN.EVM});return _.EventsController.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:W("eip155")===c.W3mFrameRpcConstants.ACCOUNT_TYPES.SMART_ACCOUNT,token:e_.state.token?.symbol||"",amount:e.sendTokenAmount,network:eR.state.activeCaipNetwork?.caipNetworkId||"",hash:s||""}}),e_.resetSend(),{hash:s}}return{hash:void 0}},async sendSolanaToken(){let e;if(!e_.state.sendTokenAmount||!e_.state.receiverAddress)throw Error("An amount and receiver address are required");v.pushTransactionStack({onSuccess(){v.replace("Account")}}),e_.state.token&&e_.state.token.address!==M.ConstantsUtil.SOLANA_NATIVE_TOKEN_ADDRESS&&(e=f.CoreHelperUtil.isCaipAddress(e_.state.token.address)?f.CoreHelperUtil.getPlainAddress(e_.state.token.address):e_.state.token.address);let t=await G.sendTransaction({chainNamespace:"solana",tokenMint:e,to:e_.state.receiverAddress,value:e_.state.sendTokenAmount});t&&(eA.hash=t),G._getClient()?.updateBalance("solana"),_.EventsController.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:!1,token:e_.state.token?.symbol||"",amount:e_.state.sendTokenAmount,network:eR.state.activeCaipNetwork?.caipNetworkId||"",hash:t||""}}),e_.resetSend()},resetSend(){eA.token=void 0,eA.sendTokenAmount=void 0,eA.receiverAddress=void 0,eA.receiverProfileImageUrl=void 0,eA.receiverProfileName=void 0,eA.loading=!1,eA.tokenBalances=[]}}),eN={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},ew={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},eI=(0,r.proxy)({chains:(0,n.proxyMap)(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{connectionControllerClient:void 0},isSwitchingNamespace:!1}),eT={state:eI,subscribe:e=>(0,r.subscribe)(eI,()=>{e(eI)}),subscribeKey:(e,t)=>(0,n.subscribeKey)(eI,e,t),subscribeAccountStateProp(e,t,a){let r=a||eI.activeChain;return r?(0,n.subscribeKey)(eI.chains.get(r)?.accountState||{},e,t):()=>void 0},subscribeChainProp(e,t,a){let n;return(0,r.subscribe)(eI.chains,()=>{let r=a||eI.activeChain;if(r){let a=eI.chains.get(r)?.[e];n!==a&&(n=a,t(a))}})},initialize(e,t,a){let{chainId:n,namespace:o}=h.StorageUtil.getActiveNetworkProps(),s=t?.find(e=>e.id.toString()===n?.toString()),i=e.find(e=>e?.namespace===o)||e?.[0],c=e.map(e=>e.namespace).filter(e=>void 0!==e),l=new Set(g.OptionsController.state.enableEmbedded?[...c]:[...t?.map(e=>e.chainNamespace)??[]]);e?.length!==0&&i||(eI.noAdapters=!0),!eI.noAdapters&&(eI.activeChain=i?.namespace,eI.activeCaipNetwork=s,eR.setChainNetworkData(i?.namespace,{caipNetwork:s}),eI.activeChain&&w.set({activeChain:i?.namespace})),l.forEach(e=>{let n=t?.filter(t=>t.chainNamespace===e),o=h.StorageUtil.getPreferredAccountTypes()||{},s={...g.OptionsController.state.defaultAccountTypes,...o};eR.state.chains.set(e,{namespace:e,networkState:(0,r.proxy)({...ew,caipNetwork:n?.[0]}),accountState:(0,r.proxy)({...eN,preferredAccountType:s[e]}),caipNetworks:n??[],...a}),eR.setRequestedCaipNetworks(n??[],e)})},removeAdapter(e){if(eI.activeChain===e){let t=Array.from(eI.chains.entries()).find(([t])=>t!==e);if(t){let e=t[1]?.caipNetworks?.[0];e&&eR.setActiveCaipNetwork(e)}}eI.chains.delete(e)},addAdapter(e,{connectionControllerClient:t},a){if(!e.namespace)throw Error("ChainController:addAdapter - adapter must have a namespace");eI.chains.set(e.namespace,{namespace:e.namespace,networkState:{...ew,caipNetwork:a[0]},accountState:{...eN},caipNetworks:a,connectionControllerClient:t}),eR.setRequestedCaipNetworks(a?.filter(t=>t.chainNamespace===e.namespace)??[],e.namespace)},addNetwork(e){let t=eI.chains.get(e.chainNamespace);if(t){let a=[...t.caipNetworks||[]];t.caipNetworks?.find(t=>t.id===e.id)||a.push(e),eI.chains.set(e.chainNamespace,{...t,caipNetworks:a}),eR.setRequestedCaipNetworks(a,e.chainNamespace),D.filterByNamespace(e.chainNamespace,!0)}},removeNetwork(e,t){let a=eI.chains.get(e);if(a){let r=eI.activeCaipNetwork?.id===t,n=[...a.caipNetworks?.filter(e=>e.id!==t)||[]];r&&a?.caipNetworks?.[0]&&eR.setActiveCaipNetwork(a.caipNetworks[0]),eI.chains.set(e,{...a,caipNetworks:n}),eR.setRequestedCaipNetworks(n||[],e),0===n.length&&D.filterByNamespace(e,!1)}},setAdapterNetworkState(e,t){let a=eI.chains.get(e);a&&(a.networkState={...a.networkState||ew,...t},eI.chains.set(e,a))},setChainAccountData(e,t,a=!0){if(!e)throw Error("Chain is required to update chain account data");let r=eI.chains.get(e);if(r){let a={...r.accountState||eN,...t};eI.chains.set(e,{...r,accountState:a}),(1===eI.chains.size||eI.activeChain===e)&&t.caipAddress&&(eI.activeCaipAddress=t.caipAddress)}},setChainNetworkData(e,t){if(!e)return;let a=eI.chains.get(e);if(a){let r={...a.networkState||ew,...t};eI.chains.set(e,{...a,networkState:r})}},setAccountProp(e,t,a,r=!0){eR.setChainAccountData(a,{[e]:t},r)},setActiveNamespace(e){eI.activeChain=e;let t=e?eI.chains.get(e):void 0,a=t?.networkState?.caipNetwork;a?.id&&e&&(eI.activeCaipAddress=t?.accountState?.caipAddress,eI.activeCaipNetwork=a,eR.setChainNetworkData(e,{caipNetwork:a}),h.StorageUtil.setActiveCaipNetworkId(a?.caipNetworkId),w.set({activeChain:e,selectedNetworkId:a?.caipNetworkId}))},setActiveCaipNetwork(e){if(!e)return;let t=eI.activeChain===e.chainNamespace;t||eR.setIsSwitchingNamespace(!0);let a=eI.chains.get(e.chainNamespace);eI.activeChain=e.chainNamespace,eI.activeCaipNetwork=e,eR.setChainNetworkData(e.chainNamespace,{caipNetwork:e});let r=a?.accountState?.address;if(r)eI.activeCaipAddress=`${e.chainNamespace}:${e.id}:${r}`;else if(t&&eI.activeCaipAddress){let{address:t}=i.ParseUtil.parseCaipAddress(eI.activeCaipAddress);r=t,eI.activeCaipAddress=`${e.caipNetworkId}:${r}`}else eI.activeCaipAddress=void 0;eR.setChainAccountData(e.chainNamespace,{address:r,caipAddress:eI.activeCaipAddress}),e_.resetSend(),w.set({activeChain:eI.activeChain,selectedNetworkId:eI.activeCaipNetwork?.caipNetworkId}),h.StorageUtil.setActiveCaipNetworkId(e.caipNetworkId),eR.checkIfSupportedNetwork(e.chainNamespace)||!g.OptionsController.state.enableNetworkSwitch||g.OptionsController.state.allowUnsupportedChain||G.state.wcBasic||eR.showUnsupportedChainUI()},addCaipNetwork(e){if(!e)return;let t=eI.chains.get(e.chainNamespace);t&&t?.caipNetworks?.push(e)},async switchActiveNamespace(e){if(!e)return;let t=e!==eR.state.activeChain,a=eR.getNetworkData(e)?.caipNetwork,r=eR.getCaipNetworkByNamespace(e,a?.id);t&&r&&await eR.switchActiveNetwork(r)},async switchActiveNetwork(e,{throwOnFailure:t=!1}={}){let a=eR.state.activeChain;if(!a)throw Error("ChainController:switchActiveNetwork - namespace is required");let r="AUTH"===et.getProviderId(eI.activeChain),n=eR.getAccountData(a)?.address,s=o.ConstantsUtil.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e.chainNamespace);try{if(n&&e.chainNamespace===a||r&&s){let t=z.get(e.chainNamespace);if(!t)throw Error("Adapter not found");await t.switchNetwork({caipNetwork:e})}eR.setActiveCaipNetwork(e)}catch(e){if(t)throw e}_.EventsController.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:e.caipNetworkId}})},getConnectionControllerClient(e){let t=e||eI.activeChain;if(!t)throw Error("Chain is required to get connection controller client");let a=eI.chains.get(t);if(!a?.connectionControllerClient)throw Error("ConnectionController client not set");return a.connectionControllerClient},getNetworkProp(e,t){let a=eI.chains.get(t)?.networkState;if(a)return a[e]},getRequestedCaipNetworks(e){let t=eI.chains.get(e),{approvedCaipNetworkIds:a=[],requestedCaipNetworks:r=[]}=t?.networkState||{};return f.CoreHelperUtil.sortRequestedNetworks(a,r).filter(e=>e?.id)},getAllRequestedCaipNetworks(){let e=[];return eI.chains.forEach(t=>{if(!t.namespace)throw Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");let a=eR.getRequestedCaipNetworks(t.namespace);e.push(...a)}),e},setRequestedCaipNetworks(e,t){eR.setAdapterNetworkState(t,{requestedCaipNetworks:e});let a=Array.from(new Set(eR.getAllRequestedCaipNetworks().map(e=>e.chainNamespace)));D.filterByNamespaces(a)},getAllApprovedCaipNetworkIds(){let e=[];return eI.chains.forEach(t=>{if(!t.namespace)throw Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");let a=eR.getApprovedCaipNetworkIds(t.namespace);e.push(...a)}),e},getActiveCaipNetwork:e=>e?eI.chains.get(e)?.networkState?.caipNetwork:eI.activeCaipNetwork,getActiveCaipAddress:()=>eI.activeCaipAddress,getApprovedCaipNetworkIds(e){let t=eI.chains.get(e);return t?.networkState?.approvedCaipNetworkIds||[]},setApprovedCaipNetworksData(e,t){eR.setAdapterNetworkState(e,t)},checkIfSupportedNetwork(e,t){let a=t||eI.activeCaipNetwork?.caipNetworkId,r=eR.getRequestedCaipNetworks(e);return!r.length||r?.some(e=>e.caipNetworkId===a)},checkIfSupportedChainId(e){if(!eI.activeChain)return!0;let t=eR.getRequestedCaipNetworks(eI.activeChain);return t?.some(t=>t.id===e)},checkIfSmartAccountEnabled(){let e=s.NetworkUtil.caipNetworkIdToNumber(eI.activeCaipNetwork?.caipNetworkId);if(!eI.activeChain||!e)return!1;let t=l.W3mFrameStorage.get(c.W3mFrameConstants.SMART_ACCOUNT_ENABLED_NETWORKS)?.split(",")||[];return!!t?.includes(e.toString())},showUnsupportedChainUI(){T.open({view:"UnsupportedChain"})},checkIfNamesSupported(){let e=eI.activeCaipNetwork;return!!(e?.chainNamespace&&M.ConstantsUtil.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(e.chainNamespace))},resetNetwork(e){eR.setAdapterNetworkState(e,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(e){if(!e)throw Error("Chain is required to set account prop");let t=eR.state.chains.get(e)?.accountState?.preferredAccountType,a=g.OptionsController.state.defaultAccountTypes[e];eI.activeCaipAddress=void 0,eR.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:a||t,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),D.removeConnectorId(e)},setIsSwitchingNamespace(e){eI.isSwitchingNamespace=e},getFirstCaipNetworkSupportsAuthConnector(){let e=[];if(eI.chains.forEach(t=>{o.ConstantsUtil.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>e===t.namespace)&&t.namespace&&e.push(t.namespace)}),e.length>0){let t=e[0];return t?eI.chains.get(t)?.caipNetworks?.[0]:void 0}},getAccountData(e){let t=e||eI.activeChain;if(t)return eR.state.chains.get(t)?.accountState},getNetworkData(e){let t=e||eI.activeChain;if(t)return eR.state.chains.get(t)?.networkState},getCaipNetworkByNamespace(e,t){if(!e)return;let a=eR.state.chains.get(e),r=a?.caipNetworks?.find(e=>e.id.toString()===t?.toString());return r||a?.networkState?.caipNetwork||a?.caipNetworks?.[0]},getRequestedCaipNetworkIds(){let e=D.state.filterByNamespace;return(e?[eI.chains.get(e)]:Array.from(eI.chains.values())).flatMap(e=>e?.caipNetworks||[]).map(e=>e.caipNetworkId)},getCaipNetworks:e=>e?eR.getRequestedCaipNetworks(e):eR.getAllRequestedCaipNetworks(),getCaipNetworkById:(e,t)=>eT.getCaipNetworks(t).find(t=>t.id.toString()===e.toString()||t.caipNetworkId.toString()===e.toString()),setLastConnectedSIWECaipNetwork(e){eI.lastConnectedSIWECaipNetwork=e},getLastConnectedSIWECaipNetwork:()=>eI.lastConnectedSIWECaipNetwork,async fetchTokenBalance(e){let t=eR.getAccountData();if(!t)return[];let a=eR.state.activeCaipNetwork?.caipNetworkId,r=eR.state.activeCaipNetwork?.chainNamespace,n=eR.state.activeCaipAddress,o=n?f.CoreHelperUtil.getPlainAddress(n):void 0;if(eR.setAccountProp("balanceLoading",!0,r),t.lastRetry&&!f.CoreHelperUtil.isAllowedRetry(t.lastRetry,30*M.ConstantsUtil.ONE_SEC_MS))return eR.setAccountProp("balanceLoading",!1,r),[];try{if(o&&a&&r){let e=await X.getMyTokensWithBalance();return eR.setAccountProp("tokenBalance",e,r),eR.setAccountProp("lastRetry",void 0,r),eR.setAccountProp("balanceLoading",!1,r),e}}catch(t){eR.setAccountProp("lastRetry",Date.now(),r),e?.(t),K.SnackController.showError("Token Balance Unavailable")}finally{eR.setAccountProp("balanceLoading",!1,r)}return[]},isCaipNetworkDisabled(e){let t=e.chainNamespace,a=!!eR.getAccountData(t)?.caipAddress,r=eR.getAllApprovedCaipNetworkIds(),n=!1!==eR.getNetworkProp("supportsAllNetworks",t),s=D.getConnectorId(t),i=D.getAuthConnector(),c=s===o.ConstantsUtil.CONNECTOR_ID.AUTH&&i;return!!a&&!n&&!c&&!r?.includes(e.caipNetworkId)}},eR=(0,m.withErrorBoundary)(eT)}]);