{"version":3,"sources":["turbopack:///[project]/src/instrumentation.ts","turbopack:///[project]/edge-wrapper.js"],"sourcesContent":["// instrumentation.ts - Next.js Instrumentation API\n// Este arquivo Ã© executado quando o servidor Next.js inicia\n\nexport async function register() {\n  if (process.env.NEXT_RUNTIME === 'nodejs') {\n    // Apenas no servidor Node.js (nÃ£o no Edge Runtime)\n    const { register: prometheusRegister } = await import('prom-client')\n    \n    // Registrar hooks para instrumentaÃ§Ã£o\n    console.log('ðŸ“Š Prometheus instrumentation registered')\n    \n    // Hook para interceptar fetch requests (Node.js 18+)\n    if (typeof global.fetch === 'function') {\n      const originalFetch = global.fetch\n      global.fetch = async (...args) => {\n        const startTime = Date.now()\n        try {\n          const response = await originalFetch(...args)\n          const duration = (Date.now() - startTime) / 1000\n          \n          // Registrar mÃ©trica (se disponÃ­vel)\n          console.log(`Fetch: ${args[0]} - ${response.status} (${duration}s)`)\n          \n          return response\n        } catch (error) {\n          console.error(`Fetch error: ${args[0]}`, error)\n          throw error\n        }\n      }\n    }\n  }\n}\n\n// Opcional: funÃ§Ã£o para executar quando o servidor estÃ¡ pronto\nexport async function onRequestError(\n  err: Error,\n  request: {\n    path: string\n    method: string\n  }\n) {\n  console.error(`âŒ Request error: ${request.method} ${request.path}`, err)\n}\n","self._ENTRIES ||= {};\nconst modProm = import('MODULE');\nmodProm.catch(() => {});\nself._ENTRIES[\"middleware_instrumentation\"] = new Proxy(modProm, {\n    get(modProm, name) {\n        if (name === \"then\") {\n            return (res, rej) => modProm.then(res, rej);\n        }\n        let result = (...args) => modProm.then((mod) => (0, mod[name])(...args));\n        result.then = (res, rej) => modProm.then((mod) => mod[name]).then(res, rej);\n        return result;\n    },\n});\n"],"names":[],"mappings":"wGAGO,eAAe,IA4BtB,CAGO,eAAe,EACpB,CAAU,CACV,CAGC,EAED,QAAQ,KAAK,CAAC,CAAC,iBAAiB,EAAE,EAAQ,MAAM,CAAC,CAAC,EAAE,EAAQ,IAAI,CAAA,CAAE,CAAE,EACtE,kEC1CA,KAAK,QAAQ,GAAK,CAAC,EACnB,IAAM,EAAA,QAAA,OAAA,GAAA,IAAA,CAAA,IAAA,EAAA,CAAA,CAAA,SACN,EAAQ,KAAK,CAAC,KAAO,GACrB,KAAK,QAAQ,CAAC,0BAA6B,CAAG,IAAI,MAAM,EAAS,CAC7D,IAAI,CAAO,CAAE,CAAI,EACb,GAAa,QAAQ,CAAjB,EACA,MAAO,CAAC,EAAK,IAAQ,EAAQ,IAAI,CAAC,EAAK,GAE3C,IAAI,EAAS,CAAC,GAAG,IAAS,EAAQ,IAAI,CAAC,AAAC,GAAQ,AAAC,GAAG,CAAG,CAAC,EAAA,AAAK,KAAK,IAElE,OADA,EAAO,IAAI,CAAG,CAAC,EAAK,IAAQ,EAAQ,IAAI,CAAC,AAAC,GAAQ,CAAG,CAAC,EAAK,EAAE,IAAI,CAAC,EAAK,GAChE,CACX,CACJ"}