module.exports=[453701,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(167453),e=a.i(862722),f=a.i(641710),g=a.i(170106);let h=(0,g.default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);var i=a.i(862214),j=a.i(596221),k=a.i(111048),l=a.i(933323);function m(){let[a,g]=(0,c.useState)([]),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(""),{isConnected:q,publishProposal:r,publishVote:s,subscribe:t,stats:u,connect:v,getClient:w,getStats:x,PUBSUB_TOPICS:y}=(0,k.useP2P)({autoConnect:!1}),{address:z,isConnected:A}=(0,l.useAccount)(),B=(a,b,c,d)=>{g(e=>e.find(b=>b.name===a)?e.map(e=>e.name===a?{...e,status:b,message:c,data:d}:e):[...e,{name:a,status:b,message:c,data:d}])},C=async(a,b)=>{p(a),B(a,"running","Executando..."),Date.now();try{let c=await b();return Date.now(),B(a,c.success?"success":"error",c.message,c.data),c.success}catch(c){Date.now();let b={message:c.message||"Erro desconhecido",name:c.name,stack:c.stack,cause:c.cause,response:c.response?{status:c.response.status,statusText:c.response.statusText,data:c.response.data}:void 0,...Object.getOwnPropertyNames(c).reduce((a,b)=>(["message","name","stack","cause","response"].includes(b)||(a[b]=c[b]),a),{})};return console.error(`âŒ Erro detalhado no teste "${a}":`,b),B(a,"error",`${c.message||"Erro desconhecido"}`,b),!1}},D=async()=>{(n(!0),g([]),await C("Wallet Connection",async()=>A&&z?{success:!0,message:`Carteira conectada: ${z.slice(0,6)}...${z.slice(-4)}`,data:{address:z}}:{success:!1,message:"Carteira nÃ£o conectada. Por favor, conecte sua carteira primeiro."})&&await C("P2P Connection",async()=>{try{if(console.log("=== TESTE P2P CONNECTION V2 ==="),console.log("ðŸ” Iniciando teste de conexÃ£o P2P..."),console.log("ðŸ” Estado inicial - p2pConnected:",q),console.log("ðŸ” Stats atuais:",u),console.log("ðŸ” FunÃ§Ã£o connect disponÃ­vel?",typeof v),q)console.log("âš ï¸ JÃ¡ estava conectado, pulando connect()");else{console.log("ðŸ”„ Tentando conectar..."),console.log("ðŸ”„ Chamando connect()...");let a=await v();console.log("ðŸ”„ connect() retornou:",a),await new Promise(a=>setTimeout(a,3e3)),console.log("ðŸ” ApÃ³s connect() + delay - p2pConnected:",q),console.log("ðŸ” Stats apÃ³s connect():",u);let b=w(),c=x();if(console.log("ï¿½ Client disponÃ­vel?",!!b),console.log("ï¿½ðŸ“Š Stats direto do getStats():",c),b&&c.peerId)return{success:!0,message:`Conectado ao P2P. Peer ID: ${c.peerId.slice(0,10)}...`,data:{peerId:c.peerId,peers:c.peers,fullStats:c,reactState:{p2pConnected:q,stats:u}}}}if(console.log("ðŸ” VerificaÃ§Ã£o final:",{isNowConnected:q,hasPeerId:!!u.peerId,peerId:u.peerId,peers:u.peers}),q&&u.peerId)return{success:!0,message:`Conectado ao P2P. Peer ID: ${u.peerId.slice(0,10)}...`,data:{peerId:u.peerId,peers:u.peers,fullStats:u}};let a={p2pConnected:q,hasPeerId:!!u.peerId,peerId:u.peerId,peers:u.peers,stats:u,timestamp:new Date().toISOString()};return console.error("âŒ Falha na conexÃ£o P2P. Estado:",a),{success:!1,message:`Falha ao conectar ao P2P. Status: ${q?"conectado":"desconectado"}, PeerId: ${u.peerId||"N/A"}`,data:a}}catch(a){throw console.error("âŒ ExceÃ§Ã£o no teste de conexÃ£o P2P:",a),a}})&&(await C("P2P Peers Discovery",async()=>(await new Promise(a=>setTimeout(a,3e3)),{success:u.peers>=0,message:`${u.peers} peer(s) descoberto(s)`,data:{peers:u.peers}})),await C("P2P Topic Subscription",async()=>(t(y.PROPOSALS_NEW,a=>{console.log("ðŸ“¨ Proposta recebida via P2P:",a)}),t(y.VOTES_NEW,a=>{console.log("ðŸ“¨ Voto recebido via P2P:",a)}),await new Promise(a=>setTimeout(a,1e3)),{success:!0,message:`Inscrito em ${Object.keys(y).length} t\xf3picos P2P`,data:{topics:Object.values(y)}})),await C("Publish Test Proposal",async()=>{let a={id:`test-${Math.random().toString(16).slice(2)}`,hash:`0x${Math.random().toString(16).slice(2)}`,title:`[TESTE E2E] Proposta ${new Date().toISOString()}`,description:"Proposta de teste para validaÃ§Ã£o P2P",voteType:"LINEAR",tags:["teste","e2e","p2p"],chainId:1,timestamp:Date.now(),creator:z};console.log("ðŸ“¤ Tentando publicar proposta:",a),console.log("ðŸ” publishProposal disponÃ­vel?",typeof r),console.log("ðŸ” Client atual:",w());try{let b=await r(a);if(console.log("ðŸ“¤ publishProposal retornou:",b),b)return{success:!0,message:"Proposta publicada com sucesso no P2P",data:a};return{success:!1,message:"Falha ao publicar proposta no P2P (retornou false)",data:{testProposal:a,publishProposalResult:b}}}catch(b){return console.error("âŒ Erro ao publicar proposta:",b),{success:!1,message:`Erro ao publicar: ${b.message}`,data:{error:b.message,testProposal:a}}}})))?(await new Promise(a=>setTimeout(a,2e3)),await C("Publish Test Vote",async()=>{let a={hash:`0x${Math.random().toString(16).slice(2)}`,proposalId:"test-proposal-1",voter:z,choice:"FOR",support:"FOR",weight:"1000000000000000000",tokens:"1000000000000000000",chainId:1,timestamp:Date.now()};return await s(a)?{success:!0,message:"Voto publicado com sucesso no P2P",data:a}:{success:!1,message:"Falha ao publicar voto no P2P"}}),await new Promise(a=>setTimeout(a,2e3)),await C("P2P Metrics Validation",async()=>{let a={messagesSent:u.metrics.messagesSent,messagesReceived:u.metrics.messagesReceived,proposalsSent:u.metrics.proposalsReceived>=0,votesSent:u.metrics.votesReceived>=0};return{success:!0,message:`M\xe9tricas: ${a.messagesSent} enviadas, ${a.messagesReceived} recebidas`,data:a}}),n(!1),p("")):n(!1)},E=a.filter(a=>"success"===a.status).length,F=a.filter(a=>"error"===a.status).length,G=a.length;return(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 max-w-4xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"ðŸ§ª P2P End-to-End Test Suite"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Teste completo do fluxo P2P: Proposta â†’ PropagaÃ§Ã£o â†’ Voto â†’ PropagaÃ§Ã£o"})]}),(0,b.jsxs)("button",{onClick:D,disabled:m||!A,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 disabled:from-gray-400 disabled:to-gray-400 text-white font-medium rounded-lg transition-all disabled:cursor-not-allowed shadow-lg",children:[(0,b.jsx)(h,{className:"w-5 h-5"}),m?"Executando...":"Executar Testes"]})]}),q&&(0,b.jsxs)("div",{className:"mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg flex items-center gap-3",children:[(0,b.jsx)(i.Network,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-green-800 dark:text-green-200",children:"P2P Conectado"}),(0,b.jsxs)("p",{className:"text-xs text-green-700 dark:text-green-300",children:[u.peers," peer(s) â€¢ Peer ID: ",u.peerId.slice(0,20),"..."]})]})]}),a.length>0&&(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,b.jsxs)("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,b.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Total"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:G})]}),(0,b.jsxs)("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[(0,b.jsx)("p",{className:"text-xs text-green-600 dark:text-green-400 mb-1",children:"Sucesso"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:E})]}),(0,b.jsxs)("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[(0,b.jsx)("p",{className:"text-xs text-red-600 dark:text-red-400 mb-1",children:"Falhas"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:F})]})]}),(0,b.jsx)("div",{className:"space-y-3",children:a.map((a,c)=>(0,b.jsx)("div",{className:`p-4 border rounded-lg transition-all ${(a=>{switch(a){case"success":return"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800";case"error":return"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800";case"running":return"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800";default:return"bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-gray-700"}})(a.status)}`,children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(a=>{switch(a){case"success":return(0,b.jsx)(d.CheckCircle2,{className:"w-5 h-5 text-green-600 dark:text-green-400"});case"error":return(0,b.jsx)(e.XCircle,{className:"w-5 h-5 text-red-600 dark:text-red-400"});case"running":return(0,b.jsx)(j.Loader2,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 animate-spin"});default:return(0,b.jsx)(f.Clock,{className:"w-5 h-5 text-gray-400"})}})(a.status),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,b.jsxs)("h3",{className:"font-semibold text-gray-900 dark:text-white",children:[c+1,". ",a.name]}),"running"===a.status&&(0,b.jsx)("span",{className:"text-xs text-blue-600 dark:text-blue-400 animate-pulse",children:"Executando..."})]}),(0,b.jsx)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:a.message}),a.data&&(0,b.jsxs)("details",{className:"mt-2",children:[(0,b.jsx)("summary",{className:"text-xs text-gray-500 dark:text-gray-400 cursor-pointer hover:text-gray-700 dark:hover:text-gray-200",children:"Ver detalhes"}),(0,b.jsx)("pre",{className:"mt-2 p-2 bg-gray-100 dark:bg-gray-800 rounded text-xs overflow-x-auto",children:JSON.stringify(a.data,null,2)})]})]})]})},a.name))}),0===a.length&&(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(i.Network,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Pronto para Testar"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:'Clique em "Executar Testes" para iniciar a suÃ­te completa de testes P2P'}),!A&&(0,b.jsx)("p",{className:"text-sm text-orange-600 dark:text-orange-400",children:"âš ï¸ Conecte sua carteira primeiro"})]})]})}var n=a.i(653912),o=a.i(479556);let p=(0,g.default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var q=a.i(238246);function r(){return(0,c.useEffect)(()=>{let a=localStorage.getItem("theme"),b=window.matchMedia("(prefers-color-scheme: dark)").matches;"dark"===a||!a&&b?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[]),(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800",children:[(0,b.jsx)("header",{className:"border-b border-gray-200 dark:border-gray-800 bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm sticky top-0 z-40",children:(0,b.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)(q.default,{href:"/",className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:[(0,b.jsx)(p,{className:"w-5 h-5"}),(0,b.jsx)("span",{className:"text-sm font-medium",children:"Voltar"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold gradient-rgb",children:"Testes E2E P2P"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"ValidaÃ§Ã£o completa do sistema de rede distribuÃ­da"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(o.default,{}),(0,b.jsx)(n.CustomConnectButton,{})]})]})})}),(0,b.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,b.jsxs)("div",{className:"mb-8 p-6 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"â„¹ï¸ Sobre estes testes"}),(0,b.jsxs)("div",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-2",children:[(0,b.jsx)("p",{children:"Esta suÃ­te de testes valida o fluxo completo de comunicaÃ§Ã£o peer-to-peer (P2P) do sistema de governanÃ§a descentralizada."}),(0,b.jsx)("p",{className:"font-medium",children:"Testes executados:"}),(0,b.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[(0,b.jsx)("li",{children:"ConexÃ£o da carteira Web3"}),(0,b.jsx)("li",{children:"Estabelecimento de conexÃ£o P2P com backend"}),(0,b.jsx)("li",{children:"Descoberta de peers na rede"}),(0,b.jsx)("li",{children:"SubscriÃ§Ã£o em tÃ³picos de mensagens"}),(0,b.jsx)("li",{children:"PublicaÃ§Ã£o de proposta de teste"}),(0,b.jsx)("li",{children:"PublicaÃ§Ã£o de voto de teste"}),(0,b.jsx)("li",{children:"ValidaÃ§Ã£o de mÃ©tricas de rede"})]}),(0,b.jsx)("p",{className:"mt-4 text-xs text-blue-700 dark:text-blue-300 italic",children:"ðŸ’¡ Dica: Execute com mÃºltiplas janelas abertas para simular vÃ¡rios peers"})]})]}),(0,b.jsx)(m,{}),(0,b.jsxs)("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"p-6 bg-white dark:bg-gray-800 rounded-lg shadow-md",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"ðŸ”§ Tecnologias"}),(0,b.jsxs)("ul",{className:"text-sm text-gray-700 dark:text-gray-300 space-y-2",children:[(0,b.jsxs)("li",{children:["â€¢ ",(0,b.jsx)("strong",{children:"libp2p"})," - Rede P2P distribuÃ­da"]}),(0,b.jsxs)("li",{children:["â€¢ ",(0,b.jsx)("strong",{children:"PubSub"})," - Mensageria entre peers"]}),(0,b.jsxs)("li",{children:["â€¢ ",(0,b.jsx)("strong",{children:"GossipSub"})," - Protocolo de propagaÃ§Ã£o"]}),(0,b.jsxs)("li",{children:["â€¢ ",(0,b.jsx)("strong",{children:"REST API"})," - Interface com backend"]}),(0,b.jsxs)("li",{children:["â€¢ ",(0,b.jsx)("strong",{children:"WebSocket"})," - ComunicaÃ§Ã£o em tempo real"]})]})]}),(0,b.jsxs)("div",{className:"p-6 bg-white dark:bg-gray-800 rounded-lg shadow-md",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"ðŸ“Š MÃ©tricas Monitoradas"}),(0,b.jsxs)("ul",{className:"text-sm text-gray-700 dark:text-gray-300 space-y-2",children:[(0,b.jsxs)("li",{children:["â€¢ ",(0,b.jsx)("strong",{children:"Peers conectados"})," - NÃºmero de nÃ³s ativos"]}),(0,b.jsxs)("li",{children:["â€¢ ",(0,b.jsx)("strong",{children:"Mensagens enviadas"})," - Total de publicaÃ§Ãµes"]}),(0,b.jsxs)("li",{children:["â€¢ ",(0,b.jsx)("strong",{children:"Mensagens recebidas"})," - Total de recebimentos"]}),(0,b.jsxs)("li",{children:["â€¢ ",(0,b.jsx)("strong",{children:"Propostas propagadas"})," - Contagem especÃ­fica"]}),(0,b.jsxs)("li",{children:["â€¢ ",(0,b.jsx)("strong",{children:"Votos propagados"})," - Contagem especÃ­fica"]})]})]})]}),(0,b.jsxs)("div",{className:"mt-8 p-6 bg-gray-900 rounded-lg",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-white mb-3",children:"ðŸ› Console de Debug"}),(0,b.jsx)("p",{className:"text-sm text-gray-400 mb-2",children:"Abra o Console do navegador (F12) para ver logs detalhados da execuÃ§Ã£o dos testes."}),(0,b.jsxs)("div",{className:"bg-gray-950 p-4 rounded font-mono text-xs text-green-400 overflow-x-auto",children:[(0,b.jsx)("div",{children:"$ npm run dev"}),(0,b.jsx)("div",{className:"text-gray-500",children:"â†’ Frontend rodando em http://localhost:3000"}),(0,b.jsx)("div",{className:"text-gray-500",children:"â†’ Backend P2P rodando em http://localhost:3001"}),(0,b.jsx)("div",{className:"text-green-400 mt-2",children:"âœ“ Sistema pronto para testes E2E"})]})]})]}),(0,b.jsx)("footer",{className:"border-t border-gray-200 dark:border-gray-800 mt-16 py-6",children:(0,b.jsx)("div",{className:"container mx-auto px-4 text-center",children:(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"RevoluÃ§Ã£o CibernÃ©tica - Sistema de Testes P2P"})})})]})}a.s(["default",()=>r],453701)}];

//# sourceMappingURL=src_app_test-p2p_page_tsx_45313b07._.js.map