{"version":3,"sources":["turbopack:///[project]/src/instrumentation.ts"],"sourcesContent":["// instrumentation.ts - Next.js Instrumentation API\n// Este arquivo √© executado quando o servidor Next.js inicia\n\nexport async function register() {\n  if (process.env.NEXT_RUNTIME === 'nodejs') {\n    // Apenas no servidor Node.js (n√£o no Edge Runtime)\n    const { register: prometheusRegister } = await import('prom-client')\n    \n    // Registrar hooks para instrumenta√ß√£o\n    console.log('üìä Prometheus instrumentation registered')\n    \n    // Hook para interceptar fetch requests (Node.js 18+)\n    if (typeof global.fetch === 'function') {\n      const originalFetch = global.fetch\n      global.fetch = async (...args) => {\n        const startTime = Date.now()\n        try {\n          const response = await originalFetch(...args)\n          const duration = (Date.now() - startTime) / 1000\n          \n          // Registrar m√©trica (se dispon√≠vel)\n          console.log(`Fetch: ${args[0]} - ${response.status} (${duration}s)`)\n          \n          return response\n        } catch (error) {\n          console.error(`Fetch error: ${args[0]}`, error)\n          throw error\n        }\n      }\n    }\n  }\n}\n\n// Opcional: fun√ß√£o para executar quando o servidor est√° pronto\nexport async function onRequestError(\n  err: Error,\n  request: {\n    path: string\n    method: string\n  }\n) {\n  console.error(`‚ùå Request error: ${request.method} ${request.path}`, err)\n}\n"],"names":[],"mappings":"wCAGO,eAAe,IACuB,CAEzC,GAAM,CAAE,SAAU,CAAkB,CAAE,CAAG,MAAA,EAAA,CAAA,CAAA,QAMzC,GAHA,QAAQ,GAAG,CAAC,4CAGgB,YAAxB,OAAO,EAAA,CAAA,CAAO,KAAK,CAAiB,CACtC,IAAM,EAAgB,EAAA,CAAA,CAAO,KAAK,AAClC,CAAA,EAAA,CAAA,CADsB,AACf,KAAK,CAAG,MAAO,GAAG,KACvB,IAAM,EAAY,KAAK,GAAG,GAC1B,GAAI,CACF,IAAM,EAAW,MAAM,KAAiB,GAClC,EAAW,CAAC,KAAK,GAAG,GAAK,CAAA,CAAS,CAAI,IAK5C,OAFA,QAAQ,GAAG,CAAC,CAAC,OAAO,EAAE,CAAI,CAAC,EAAE,CAAC,GAAG,EAAE,EAAS,MAAM,CAAC,EAAE,EAAE,EAAS,EAAE,CAAC,EAE5D,CACT,CAAE,MAAO,EAAO,CAEd,MADA,QAAQ,KAAK,CAAC,CAAC,aAAa,EAAE,CAAI,CAAC,EAAE,CAAA,CAAE,CAAE,GACnC,CACR,CACF,CACF,CACF,CACF,CAGO,eAAe,EACpB,CAAU,CACV,CAGC,EAED,QAAQ,KAAK,CAAC,CAAC,iBAAiB,EAAE,EAAQ,MAAM,CAAC,CAAC,EAAE,EAAQ,IAAI,CAAA,CAAE,CAAE,EACtE"}